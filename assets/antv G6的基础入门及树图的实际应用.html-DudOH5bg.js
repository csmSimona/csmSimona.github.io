import{_ as s,c as n,o as a,a as l}from"./app-C_Vf4vWB.js";const e="/assets/%E9%9B%86%E5%9B%A2%E6%9E%B6%E6%9E%84%E7%A2%B3%E5%BC%BA%E5%BA%A6%E5%88%86%E6%9E%90-Dr7R4ffN.png",p={},i=l(`<h1 id="antv-g6的基础入门及树图的实际应用" tabindex="-1"><a class="header-anchor" href="#antv-g6的基础入门及树图的实际应用"><span>antv G6的基础入门及树图的实际应用</span></a></h1><p>官网：https://g6.antv.antgroup.com/</p><p>详细api：https://g6.antv.antgroup.com/api/Graph</p><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p><a href="https://github.com/antvis/g6" target="_blank" rel="noopener noreferrer">G6</a> 是一个简单、易用、完备的图可视化引擎。它提供了图的绘制、布局、分析、交互、动画等图可视化的基础能力。旨在让关系变得透明，简单。让用户获得关系数据的 Insight。基于 G6，用户可以快速搭建自己的 <strong>图分析</strong> 或 <strong>图编辑</strong> 应用。</p><p><strong>特性</strong></p><p>G6 作为一款专业的图可视化引擎，具有以下特性：</p><ul><li>丰富的元素：内置丰富的节点与边元素，自由配置，支持自定义；</li><li>可控的交互：内置 10+ 交互行为，支持自定义交互；</li><li>强大的布局：内置了 10+ 常用的图布局，支持自定义布局；</li><li>便捷的组件：优化内置组件功能及性能；</li><li>友好的体验：根据用户需求分层梳理文档，支持 TypeScript 类型推断。</li></ul><p>除了默认好用、配置自由的内置功能，元素、交互、布局均具有高可扩展的自定义机制。</p><p><strong>安装 &amp; 引用</strong></p><p>1、在项目中使用 NPM 包引入</p><p>Step 1: 使用命令行在项目目录下执行以下命令：</p><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-bash;"><code><span class="line"><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> install</span><span style="color:#569CD6;"> --save</span><span style="color:#CE9178;"> @antv/g6</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Step 2: 在需要用的 G6 的 JS 文件中导入：</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> G6</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &#39;@antv/g6&#39;</span><span style="color:#D4D4D4;">;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2、在 HTML 中使用 CDN 引入</p><div class="language-html line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-html;"><code><span class="line"><span class="line"><span style="color:#D4D4D4;">// version </span><span style="color:#F44747;">&lt;</span><span style="color:#D4D4D4;">= 3.2</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">script</span><span style="color:#9CDCFE;"> src</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;https://gw.alipayobjects.com/os/antv/pkg/_antv.g6-{$version}/build/g6.js&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">script</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">// version &gt;= 3.3</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">script</span><span style="color:#9CDCFE;"> src</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;https://gw.alipayobjects.com/os/lib/antv/g6/{$version}/dist/g6.min.js&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">script</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">// version &gt;= 4.0</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">script</span><span style="color:#9CDCFE;"> src</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;https://gw.alipayobjects.com/os/lib/antv/g6/4.3.11/dist/g6.min.js&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">script</span><span style="color:#808080;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="快速上手" tabindex="-1"><a class="header-anchor" href="#快速上手"><span>快速上手</span></a></h2><h3 id="步骤一-创建关系图的-html-容器" tabindex="-1"><a class="header-anchor" href="#步骤一-创建关系图的-html-容器"><span><strong>步骤一：创建关系图的 HTML 容器</strong></span></a></h3><p>需要在 HTML 中创建一个用于容纳 G6 绘制的图的容器，通常为 <code>div</code> 标签。G6 在绘制时会在该容器下追加 <code>canvas</code> 标签，然后将图绘制在其中。</p><div class="language-html line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-html;"><code><span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">div</span><span style="color:#9CDCFE;"> id</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;mountNode&quot;</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="步骤二-数据准备" tabindex="-1"><a class="header-anchor" href="#步骤二-数据准备"><span><strong>步骤二：数据准备</strong></span></a></h3><p>引入 G6 的数据源为 JSON 格式的对象。该对象中需要有节点（<code>nodes</code>）和边（<code>edges</code>）字段，分别用数组表示：</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> data</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // 点集</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  nodes:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      id:</span><span style="color:#CE9178;"> &#39;node1&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// String，该节点存在则必须，节点的唯一标识</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      x:</span><span style="color:#B5CEA8;"> 100</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Number，可选，节点位置的 x 值</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      y:</span><span style="color:#B5CEA8;"> 200</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Number，可选，节点位置的 y 值</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      id:</span><span style="color:#CE9178;"> &#39;node2&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// String，该节点存在则必须，节点的唯一标识</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      x:</span><span style="color:#B5CEA8;"> 300</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Number，可选，节点位置的 x 值</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      y:</span><span style="color:#B5CEA8;"> 200</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Number，可选，节点位置的 y 值</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // 边集</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  edges:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      source:</span><span style="color:#CE9178;"> &#39;node1&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// String，必须，起始点 id</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      target:</span><span style="color:#CE9178;"> &#39;node2&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// String，必须，目标点 id</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">};</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意</p><ul><li><code>nodes</code> 数组中包含节点对象。每个节点对象中唯一的、必要的 <code>id</code> 以标识不同的节点，<code>x</code>、 <code>y</code> 指定该节点的位置；</li><li><code>edges</code> 数组中包含边对象。<code>source</code> 和 <code>target</code> 是每条边的必要属性，分别代表了该边的起始点 <code>id</code> 与 目标点 <code>id</code>。</li><li>点和边的其他属性参见链接：<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/elements/nodes/default-node" target="_blank" rel="noopener noreferrer">内置节点</a> 和 <a href="https://g6.antv.antgroup.com/en/docs/manual/middle/elements/edges/defaultEdge" target="_blank" rel="noopener noreferrer">内置边</a>。</li></ul><h3 id="步骤三-创建关系图" tabindex="-1"><a class="header-anchor" href="#步骤三-创建关系图"><span><strong>步骤三：创建关系图</strong></span></a></h3><p>创建关系图（实例化）时，至少需要为图设置容器、宽和高。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  container:</span><span style="color:#CE9178;"> &#39;mountNode&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// String | HTMLElement，必须，在 步骤一 中创建的容器 id 或容器本身</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  width:</span><span style="color:#B5CEA8;"> 800</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Number，必须，图的宽度</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  height:</span><span style="color:#B5CEA8;"> 500</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Number，必须，图的高度</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // ...其他配置</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="步骤四-配置数据源-渲染" tabindex="-1"><a class="header-anchor" href="#步骤四-配置数据源-渲染"><span><strong>步骤四：配置数据源，渲染</strong></span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">data</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">); </span><span style="color:#6A9955;">// 读取 步骤二 中的数据源到图上</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">render</span><span style="color:#D4D4D4;">(); </span><span style="color:#6A9955;">// 渲染图</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="在react中使用g6" tabindex="-1"><a class="header-anchor" href="#在react中使用g6"><span><strong><a href="https://g6.antv.antgroup.com/manual/advanced/g6-in-react" target="_blank" rel="noopener noreferrer">在react中使用g6</a></strong></span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> React</span><span style="color:#D4D4D4;">, { </span><span style="color:#9CDCFE;">useEffect</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">useRef</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;react&#39;</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">Graph</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;@antv/g6&#39;</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> data</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  nodes:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    { </span><span style="color:#9CDCFE;">id:</span><span style="color:#CE9178;"> &#39;1&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">label:</span><span style="color:#CE9178;"> &#39;公司1&#39;</span><span style="color:#D4D4D4;"> },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    { </span><span style="color:#9CDCFE;">id:</span><span style="color:#CE9178;"> &#39;2&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">label:</span><span style="color:#CE9178;"> &#39;公司2&#39;</span><span style="color:#D4D4D4;"> },</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 节点数据 ...</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  edges:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      source:</span><span style="color:#CE9178;"> &#39;1&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      target:</span><span style="color:#CE9178;"> &#39;2&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      data:</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">type:</span><span style="color:#CE9178;"> &#39;name1&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">amount:</span><span style="color:#CE9178;"> &#39;100,000,000,00 元&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">date:</span><span style="color:#CE9178;"> &#39;2019-08-03&#39;</span><span style="color:#D4D4D4;"> },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 边数据 ...</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">};</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">export</span><span style="color:#C586C0;"> default</span><span style="color:#D4D4D4;"> () </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> containerRef</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">useRef</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> graphRef</span><span style="color:#D4D4D4;"> =</span><span style="color:#DCDCAA;">useRef</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  useEffect</span><span style="color:#D4D4D4;">(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">graphRef</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;"> || !</span><span style="color:#9CDCFE;">containerRef</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">) </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      container:</span><span style="color:#9CDCFE;"> containerRef</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      width:</span><span style="color:#B5CEA8;"> 1200</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      height:</span><span style="color:#B5CEA8;"> 800</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      modes:</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">default:</span><span style="color:#D4D4D4;"> [</span><span style="color:#CE9178;">&#39;drag-canvas&#39;</span><span style="color:#D4D4D4;">] },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      layout:</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">type:</span><span style="color:#CE9178;"> &#39;dagre&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">direction:</span><span style="color:#CE9178;"> &#39;LR&#39;</span><span style="color:#D4D4D4;"> },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      defaultNode:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        type:</span><span style="color:#CE9178;"> &#39;node&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        labelCfg:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          style:</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">fill:</span><span style="color:#CE9178;"> &#39;#000000A6&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">fontSize:</span><span style="color:#B5CEA8;"> 10</span><span style="color:#D4D4D4;"> },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        style:</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">stroke:</span><span style="color:#CE9178;"> &#39;#72CC4A&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">width:</span><span style="color:#B5CEA8;"> 150</span><span style="color:#D4D4D4;"> },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      defaultEdge:</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">type:</span><span style="color:#CE9178;"> &#39;polyline&#39;</span><span style="color:#D4D4D4;"> },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    });</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 绑定数据</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">data</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 渲染图</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">render</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    graphRef</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  }, []);</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">  return</span><span style="color:#808080;"> &lt;</span><span style="color:#569CD6;">div</span><span style="color:#9CDCFE;"> ref</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">{</span><span style="color:#9CDCFE;">containerRef</span><span style="color:#569CD6;">}</span><span style="color:#808080;">&gt;&lt;/</span><span style="color:#569CD6;">div</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">};</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="图" tabindex="-1"><a class="header-anchor" href="#图"><span>图</span></a></h2><h3 id="初始化-实例化图" tabindex="-1"><a class="header-anchor" href="#初始化-实例化图"><span>初始化/实例化图</span></a></h3><p>通过 <code>new G6.Graph(config)</code> 进行图的实例化。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  container:</span><span style="color:#CE9178;"> &#39;mountNode&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// String | HTMLElement，必须</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  width:</span><span style="color:#B5CEA8;"> 800</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Number，必须，图的宽度</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  height:</span><span style="color:#B5CEA8;"> 500</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Number，必须，图的高度</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // ...其他配置</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="常用配置项" tabindex="-1"><a class="header-anchor" href="#常用配置项"><span>常用配置项</span></a></h3><table><thead><tr><th style="text-align:left;">配置项</th><th style="text-align:left;">类型</th><th style="text-align:left;">选项 / 示例</th><th style="text-align:left;">默认</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">renderer</td><td style="text-align:left;">String</td><td style="text-align:left;">canvas / svg</td><td style="text-align:left;">canvas</td><td style="text-align:left;">使用 canvas 或 svg 渲染</td></tr><tr><td style="text-align:left;">fitView</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true / false</td><td style="text-align:left;">false</td><td style="text-align:left;">是否将图适配到画布大小，可以防止超出画布或留白太多。</td></tr><tr><td style="text-align:left;">fitViewPadding</td><td style="text-align:left;">Number / Array</td><td style="text-align:left;">20 / [ 20, 40, 50, 20 ]</td><td style="text-align:left;">0</td><td style="text-align:left;">画布上的四周留白宽度。</td></tr><tr><td style="text-align:left;">animate</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true / false</td><td style="text-align:left;">false</td><td style="text-align:left;">是否启用图的动画。</td></tr><tr><td style="text-align:left;">modes</td><td style="text-align:left;">Object</td><td style="text-align:left;">{ default: [ &#39;drag-node&#39;, &#39;drag-canvas&#39; ] }</td><td style="text-align:left;">null</td><td style="text-align:left;">图上行为模式的集合。由于比较复杂，按需参见：<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/states/mode" target="_blank" rel="noopener noreferrer">G6 中的 Mode</a> 教程。</td></tr><tr><td style="text-align:left;">defaultNode</td><td style="text-align:left;">Object</td><td style="text-align:left;">{ type: &#39;circle&#39;, color: &#39;#000&#39;, style: { ...... } }</td><td style="text-align:left;">null</td><td style="text-align:left;">节点默认的属性，包括节点的一般属性和样式属性（style）。</td></tr><tr><td style="text-align:left;">defaultEdge</td><td style="text-align:left;">Object</td><td style="text-align:left;">{ type: &#39;polyline&#39;, color: &#39;#000&#39;, style: { ...... } }</td><td style="text-align:left;">null</td><td style="text-align:left;">边默认的属性，包括边的一般属性和样式属性（style）。</td></tr><tr><td style="text-align:left;">nodeStateStyles</td><td style="text-align:left;">Object</td><td style="text-align:left;">{ hover: { ...... }, select: { ...... } }</td><td style="text-align:left;">null</td><td style="text-align:left;">节点在除默认状态外，其他状态下的样式属性（style）。例如鼠标放置（hover）、选中（select）等状态。</td></tr><tr><td style="text-align:left;">edgeStateStyles</td><td style="text-align:left;">Object</td><td style="text-align:left;">{ hover: { ...... }, select: { ...... } }</td><td style="text-align:left;">null</td><td style="text-align:left;">边在除默认状态外，其他状态下的样式属性（style）。例如鼠标放置（hover）、选中（select）等状态。</td></tr><tr><td style="text-align:left;">layout</td><td style="text-align:left;">Object</td><td style="text-align:left;">{ type: &#39;force&#39;, preventOverlap:false }</td><td style="text-align:left;">null</td><td style="text-align:left;">布局相关</td></tr><tr><td style="text-align:left;">plugins</td><td style="text-align:left;">Array</td><td style="text-align:left;">[minimap, grid]</td><td style="text-align:left;">null</td><td style="text-align:left;">插件</td></tr></tbody></table><h3 id="常用函数" tabindex="-1"><a class="header-anchor" href="#常用函数"><span>常用函数</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// 读取数据源 \`data\` 到图实例 \`graph\` 中</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">data</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 渲染图</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">render</span><span style="color:#D4D4D4;">();</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="图元素" tabindex="-1"><a class="header-anchor" href="#图元素"><span>图元素</span></a></h2><h3 id="图形-shape" tabindex="-1"><a class="header-anchor" href="#图形-shape"><span>图形 Shape</span></a></h3><p>图形具体属性：https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties</p><p>G6 中的元素（节点/边）是由一个或多个图形 Shape组成，主要<strong>通过自定义节点或自定义边时在 <code>draw</code> 方法中使用 <code>group.addShape</code> 添加</strong>，G6 中支持以下的图形 Shape：</p><ul><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#%E5%9C%86%E5%9B%BE%E5%BD%A2-circle" target="_blank" rel="noopener noreferrer">circle</a>：圆；</li><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#%E7%9F%A9%E5%BD%A2%E5%9B%BE%E5%BD%A2-rect" target="_blank" rel="noopener noreferrer">rect</a>：矩形；</li><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#%E6%A4%AD%E5%9C%86%E5%9B%BE%E5%BD%A2-ellipse" target="_blank" rel="noopener noreferrer">ellipse</a>：椭圆；</li><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%9B%BE%E5%BD%A2-polygon" target="_blank" rel="noopener noreferrer">polygon</a>：多边形；</li><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#%E6%89%87%E5%BD%A2%E5%9B%BE%E5%BD%A2-fan" target="_blank" rel="noopener noreferrer">fan</a>：扇形；</li><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#%E5%9B%BE%E7%89%87%E5%9B%BE%E5%BD%A2-image" target="_blank" rel="noopener noreferrer">image</a>：图片；</li><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#%E6%A0%87%E8%AE%B0%E5%9B%BE%E5%BD%A2-marker" target="_blank" rel="noopener noreferrer">marker</a>：标记；</li><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#%E8%B7%AF%E5%BE%84-path" target="_blank" rel="noopener noreferrer">path</a>：路径；</li><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#%E6%96%87%E6%9C%AC-text" target="_blank" rel="noopener noreferrer">text</a>：文本；</li><li><a href="https://g6.antv.antgroup.com/manual/middle/elements/shape/shape-and-properties#dom-svg" target="_blank" rel="noopener noreferrer">dom(svg)</a>：DOM（图渲染方式 <code>renderer</code> 为 <code>&#39;svg&#39;</code> 时可用）。</li></ul><p><strong>用法</strong></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;rect&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    fill:</span><span style="color:#CE9178;"> &#39;red&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    shadowOffsetX:</span><span style="color:#B5CEA8;"> 10</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    shadowOffsetY:</span><span style="color:#B5CEA8;"> 10</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    shadowColor:</span><span style="color:#CE9178;"> &#39;blue&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    shadowBlur:</span><span style="color:#B5CEA8;"> 10</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    opacity:</span><span style="color:#B5CEA8;"> 0.8</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  name:</span><span style="color:#CE9178;"> &#39;rect-shape&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>DOM (svg)</strong></p><blockquote><p>仅在 Graph 的 <code>renderer</code> 为 <code>&#39;svg&#39;</code> 时可以使用。</p></blockquote><p><strong>⚠️ 注意:</strong></p><ul><li>只支持原生 HTML DOM，不支持各类 react、vue 组件；</li><li>使用 <code>&#39;dom&#39;</code> 进行自定义的节点或边，不支持 G6 的交互事件，请使用原生 DOM 的交互事件；</li><li>在 Safari 中，若 dom 节点被设置了 <code>position:relative</code>，将会导致渲染异常。该问题与 <a href="https://bugs.webkit.org/show_bug.cgi?id=23113" target="_blank" rel="noopener noreferrer">Safari 的 foreignObject bug</a> 有关。<a href="https://github.com/antvis/G6/issues/2990" target="_blank" rel="noopener noreferrer">Issues</a>。</li></ul><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;dom&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    width:</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">size</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    height:</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">size</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // DOM&#39;s html</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    html:</span><span style="color:#CE9178;"> \`</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">    &lt;div style=&quot;background-color: #fff; border: 2px solid #5B8FF9; border-radius: 5px; width: </span><span style="color:#569CD6;">\${</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">size</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">] - </span><span style="color:#B5CEA8;">5</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    }</span><span style="color:#CE9178;">px; height: </span><span style="color:#569CD6;">\${</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">size</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">] - </span><span style="color:#B5CEA8;">5</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">px; display: flex;&quot;&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">      &lt;div style=&quot;height: 100%; width: 33%; background-color: #CDDDFD&quot;&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">        &lt;img alt=&quot;img&quot; style=&quot;line-height: 100%; padding-top: 6px; padding-left: 8px;&quot; src=&quot;https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q_FQT6nwEC8AAAAAAAAAAABkARQnAQ&quot; width=&quot;20&quot; height=&quot;20&quot; /&gt;  </span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">      &lt;/div&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">      &lt;span style=&quot;margin:auto; padding:auto; color: #5B8FF9&quot;&gt;</span><span style="color:#569CD6;">\${</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">label</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&lt;/span&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">    &lt;/div&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">      \`</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  name:</span><span style="color:#CE9178;"> &#39;dom-shape&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  draggable:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="节点" tabindex="-1"><a class="header-anchor" href="#节点"><span>节点</span></a></h3><p>节点的通用属性：https://g6.antv.antgroup.com/manual/middle/elements/nodes/default-node#%E8%8A%82%E7%82%B9%E7%9A%84%E9%80%9A%E7%94%A8%E5%B1%9E%E6%80%A7</p><h4 id="节点的配置方法" tabindex="-1"><a class="header-anchor" href="#节点的配置方法"><span>节点的配置方法</span></a></h4><p>优先级：使用 <code>graph.node(nodeFn)</code> 配置 &gt; 数据中动态配置 &gt; 实例化图时全局配置</p><p><strong>1、实例化图时全局配置</strong></p><p>用户在实例化 Graph 时候可以<strong>通过 <code>defaultNode</code> 配置</strong>节点，这里的配置是<strong>全局的配置</strong>，将会在所有节点上生效。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  container:</span><span style="color:#CE9178;"> &#39;mountNode&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  width:</span><span style="color:#B5CEA8;"> 800</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  height:</span><span style="color:#B5CEA8;"> 600</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  defaultNode:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;circle&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 其他配置</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2、 数据中动态配置</strong></p><p>如果需要为<strong>不同节点</strong>进行不同的配置，可以将配置写入到节点数据中。这种配置方式可以通过下面代码的形式直接写入数据，也可以通过遍历数据的方式写入。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> data</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  nodes:</span><span style="color:#D4D4D4;"> [{</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    id:</span><span style="color:#CE9178;"> &#39;node0&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    size:</span><span style="color:#B5CEA8;"> 100</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ...    </span><span style="color:#6A9955;">// 其他属性</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    style</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ...  </span><span style="color:#6A9955;">// 样式属性，每种节点的详细样式属性参见各节点文档</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },{</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    id:</span><span style="color:#CE9178;"> &#39;node1&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    size:</span><span style="color:#D4D4D4;"> [</span><span style="color:#B5CEA8;">50</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">100</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;ellipse&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ...    </span><span style="color:#6A9955;">// 其他属性</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    style</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ...  </span><span style="color:#6A9955;">// 样式属性，每种节点的详细样式属性参见各节点文档</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ... </span><span style="color:#6A9955;">// 其他节点</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  edges:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ... </span><span style="color:#6A9955;">// 边</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ]</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3、使用 <code>graph.node(nodeFn)</code> 配置</strong></p><p>该方法可以为不同节点进行不同的配置。</p><p><strong>提示:</strong></p><ul><li>该方法必须<strong>在 render 之前调用</strong>，否则不起作用；</li><li>由于该方法优先级最高，将覆盖其他地方对节点的配置，这可能将造成一些其他配置不生效的疑惑；</li><li>该方法在增加元素、更新元素时会被调用，如果数据量大、每个节点上需要更新的内容多时，可能会有性能问题。</li></ul><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// const data = ...</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// const graph = ...</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">node</span><span style="color:#D4D4D4;">((</span><span style="color:#9CDCFE;">node</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">  return</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    id:</span><span style="color:#9CDCFE;"> node</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    style:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      fill:</span><span style="color:#CE9178;"> &#39;blue&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  };</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">data</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">render</span><span style="color:#D4D4D4;">();</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="内置节点" tabindex="-1"><a class="header-anchor" href="#内置节点"><span>内置节点</span></a></h4><p>G6 的内置节点包括 circle，rect，ellipse，diamond，triangle，star，image，modelRect，donut（v4.2.5 起支持）。</p><p>https://g6.antv.antgroup.com/manual/middle/elements/nodes/built-in/circle</p><h4 id="自定义节点" tabindex="-1"><a class="header-anchor" href="#自定义节点"><span>自定义节点</span></a></h4><p>自定义元素 G6.registerX： https://g6.antv.antgroup.com/api/register-item</p><p>当内置节点不满足需求时，可以通过 <code>G6.registerNode(nodeName, options, extendedNodeName)</code> 方法自定义节点。</p><p>参数：</p><table><thead><tr><th style="text-align:left;">名称</th><th style="text-align:left;">类型</th><th style="text-align:left;">是否必选</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">nodeName</td><td style="text-align:left;">String</td><td style="text-align:left;">true</td><td style="text-align:left;">自定义节点名称，需保持唯一性。</td></tr><tr><td style="text-align:left;">options</td><td style="text-align:left;">Object</td><td style="text-align:left;">true</td><td style="text-align:left;">自定义节点时的配置项，配置项中包括完整的生命周期方法，具体请参考：<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/elements/shape/shape-keyshape" target="_blank" rel="noopener noreferrer">Shape Doc</a> 和 <a href="https://g6.antv.antgroup.com/zh/docs/api/register-item" target="_blank" rel="noopener noreferrer">自定义节点与边 API</a>。</td></tr><tr><td style="text-align:left;">extendNodeName</td><td style="text-align:left;">String</td><td style="text-align:left;">false</td><td style="text-align:left;">自定义节点时可基于内置节点进行定义，该字段表示内置节点名称，所有内置节点请参考：<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/elements/nodes/default-node" target="_blank" rel="noopener noreferrer">内置节点</a> 教程。</td></tr></tbody></table><p>若给定了 <code>extendNodeName</code>，如 <code>draw</code>，<code>update</code>，<code>setState</code> 等必要的函数若不在 <code>nodeDefinition</code> 中进行复写，将会继承 <code>extendNodeName</code> 中的相关定义。</p><p><strong>G6 中自定义节点的 API 如下：</strong></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerNode</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;nodeName&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 绘制节点，包含文本</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#6A9955;"> 节点的配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {G.Group}</span><span style="color:#9CDCFE;"> group</span><span style="color:#6A9955;"> 图形分组，节点中的图形对象的容器</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@return</span><span style="color:#4EC9B0;"> {G.Shape}</span><span style="color:#6A9955;"> 绘制的图形，通过 node.get(&#39;keyShape&#39;) 可以获取到</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    draw</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 绘制后的附加操作，默认没有任何操作</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#6A9955;"> 节点的配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {G.Group}</span><span style="color:#9CDCFE;"> group</span><span style="color:#6A9955;"> 图形分组，节点中的图形对象的容器</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    afterDraw</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 更新节点，包含文本</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@override</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#6A9955;"> 节点的配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Node}</span><span style="color:#9CDCFE;"> node</span><span style="color:#6A9955;"> 节点</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    update</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">node</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 更新节点后的操作，一般同 afterDraw 配合使用</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@override</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#6A9955;"> 节点的配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Node}</span><span style="color:#9CDCFE;"> node</span><span style="color:#6A9955;"> 节点</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    afterUpdate</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">node</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 设置节点的状态，主要是交互状态，业务状态请在 draw 方法中实现</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 单图形的节点仅考虑 selected、active 状态，有其他状态需求的用户自己复写这个方法</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {String}</span><span style="color:#9CDCFE;"> name</span><span style="color:#6A9955;"> 状态名称</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> value</span><span style="color:#6A9955;"> 状态值</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Node}</span><span style="color:#9CDCFE;"> node</span><span style="color:#6A9955;"> 节点</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    setState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">node</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 获取锚点（相关边的连入点）</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#6A9955;"> 节点的配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@return</span><span style="color:#4EC9B0;"> {Array|null}</span><span style="color:#6A9955;"> 锚点（相关边的连入点）的数组,如果为 null，则没有锚点</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    getAnchorPoints</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;extendedNodeName&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用-dom-自定义节点" tabindex="-1"><a class="header-anchor" href="#使用-dom-自定义节点"><span>使用 DOM 自定义节点</span></a></h4><p>仅在 Graph 的 <code>renderer</code> 为 <code>&#39;svg&#39;</code> 时可以使用。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerNode</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;dom-node&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    draw</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">ModelConfig</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">Group</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      return</span><span style="color:#9CDCFE;"> group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;dom&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          width:</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">size</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          height:</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">size</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">          // 传入 DOM 的 html</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          html:</span><span style="color:#CE9178;"> \`</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">        &lt;div style=&quot;background-color: #fff; border: 2px solid #5B8FF9; border-radius: 5px; width: </span><span style="color:#569CD6;">\${</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">size</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">] - </span><span style="color:#B5CEA8;">5</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">        }</span><span style="color:#CE9178;">px; height: </span><span style="color:#569CD6;">\${</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">size</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">] - </span><span style="color:#B5CEA8;">5</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">px; display: flex;&quot;&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">          &lt;div style=&quot;height: 100%; width: 33%; background-color: #CDDDFD&quot;&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">            &lt;img alt=&quot;img&quot; style=&quot;line-height: 100%; padding-top: 6px; padding-left: 8px;&quot; src=&quot;https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q_FQT6nwEC8AAAAAAAAAAABkARQnAQ&quot; width=&quot;20&quot; height=&quot;20&quot; /&gt;  </span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">          &lt;/div&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">          &lt;span style=&quot;margin:auto; padding:auto; color: #5B8FF9&quot;&gt;</span><span style="color:#569CD6;">\${</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">label</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&lt;/span&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">        &lt;/div&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">          \`</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        name:</span><span style="color:#CE9178;"> &#39;dom-node-keyShape&#39;</span><span style="color:#D4D4D4;">,  </span><span style="color:#6A9955;">// 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        draggable:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;single-node&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="调整节点的状态样式" tabindex="-1"><a class="header-anchor" href="#调整节点的状态样式"><span>调整节点的状态样式</span></a></h4><p>调整节点的鼠标选中/悬浮样式：样式变化响应；动画响应；</p><ul><li>在 G6 中自定义节点/边时在 <code>setState</code> 方法中进行节点状态变化的响应；</li><li>通过 <code>graph.setItemState()</code> 方法来设置状态。</li></ul><p>例：基于 rect 扩展出一个 custom 图形，默认填充色为白色，当鼠标点击时变成红色</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// 基于 rect 扩展出新的图形</span></span></span>
<span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerNode</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;custom&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 响应状态变化</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    setState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> group</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getContainer</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> shape</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;children&#39;</span><span style="color:#D4D4D4;">)[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">]; </span><span style="color:#6A9955;">// 顺序根据 draw 时确定</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;"> === </span><span style="color:#CE9178;">&#39;selected&#39;</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">        if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          shape</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;fill&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;red&#39;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        } </span><span style="color:#C586C0;">else</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          shape</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;fill&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;white&#39;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 点击时选中，再点击时取消</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;node:click&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> node</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">node</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;selected&#39;</span><span style="color:#D4D4D4;">, !</span><span style="color:#9CDCFE;">node</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">hasState</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;selected&#39;</span><span style="color:#D4D4D4;">)); </span><span style="color:#6A9955;">// 切换选中</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="节点的连接点-anchorpoint" tabindex="-1"><a class="header-anchor" href="#节点的连接点-anchorpoint"><span>节点的连接点 anchorPoint</span></a></h4><p>指的是边连入节点的相对位置，即节点与其相关边的交点位置。anchorPoints 是一个二维数组，每一项表示一个连接点的位置，在一个<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/elements/shape/shape-keyshape" target="_blank" rel="noopener noreferrer">图形 Shape</a> 中，连接点的位置如下图所示，x 和 y 方向上范围都是 [0, 1]：</p><img src="https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*EJTyR4j9VN4AAAAAAAAAAABkARQnAQ" alt="img" style="zoom:67%;"><p>边可以通过指定 <code>sourceAnchor</code> 和 <code>targetAnchor</code> 分别选择起始点、结束点的 anchorPoint</p><p>如何在节点上配置连接点、在边上指定连接点：</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> data</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  nodes:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      id:</span><span style="color:#CE9178;"> &#39;node1&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      label:</span><span style="color:#CE9178;"> &#39;node1&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      x:</span><span style="color:#B5CEA8;"> 100</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      y:</span><span style="color:#B5CEA8;"> 200</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 该节点可选的连接点集合，该点有两个可选的连接点</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      anchorPoints:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        [</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        [</span><span style="color:#B5CEA8;">0.5</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      type:</span><span style="color:#CE9178;"> &#39;rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      id:</span><span style="color:#CE9178;"> &#39;node2&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      label:</span><span style="color:#CE9178;"> &#39;node2&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      x:</span><span style="color:#B5CEA8;"> 300</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      y:</span><span style="color:#B5CEA8;"> 400</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 该节点可选的连接点集合，该点有两个可选的连接点</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      anchorPoints:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        [</span><span style="color:#B5CEA8;">0.5</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        [</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">0.5</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      type:</span><span style="color:#CE9178;"> &#39;rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  edges:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      source:</span><span style="color:#CE9178;"> &#39;node1&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      target:</span><span style="color:#CE9178;"> &#39;node2&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 该边连入 source 点的第 0 个 anchorPoint，</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      sourceAnchor:</span><span style="color:#B5CEA8;"> 0</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 该边连入 target 点的第 0 个 anchorPoint，</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      targetAnchor:</span><span style="color:#B5CEA8;"> 0</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      style:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        endArrow:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      source:</span><span style="color:#CE9178;"> &#39;node2&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      target:</span><span style="color:#CE9178;"> &#39;node1&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 该边连入 source 点的第 1 个 anchorPoint，</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      sourceAnchor:</span><span style="color:#B5CEA8;"> 1</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 该边连入 source 点的第 1 个 anchorPoint，</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      targetAnchor:</span><span style="color:#B5CEA8;"> 1</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      style:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        endArrow:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">};</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>有两种方式来调整节点上的锚点：</strong></p><ul><li><p>在数据里面指定 <code>anchorPoints</code>。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> data</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  nodes:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      id:</span><span style="color:#CE9178;"> &#39;node1&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      x:</span><span style="color:#B5CEA8;"> 100</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      y:</span><span style="color:#B5CEA8;"> 100</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      anchorPoints:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        [</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">0.5</span><span style="color:#D4D4D4;">], </span><span style="color:#6A9955;">// 左侧中间</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        [</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">0.5</span><span style="color:#D4D4D4;">], </span><span style="color:#6A9955;">// 右侧中间</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    //...       // 其他节点</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  edges:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    //... // 边</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">};</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>自定义节点中通过 <code>getAnchorPoints</code> 方法指定锚点。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerNode</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;diamond&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    //... // 其他方法</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    getAnchorPoints</span><span style="color:#D4D4D4;">() {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      return</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        [</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">0.5</span><span style="color:#D4D4D4;">], </span><span style="color:#6A9955;">// 左侧中间</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        [</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">0.5</span><span style="color:#D4D4D4;">], </span><span style="color:#6A9955;">// 右侧中间</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ];</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="使用类-jsx-语法定义-g6-节点" tabindex="-1"><a class="header-anchor" href="#使用类-jsx-语法定义-g6-节点"><span>使用类 JSX 语法定义 G6 节点</span></a></h4><p>只需要在使用 G6.registerNode 自定义节点时，将第二个参数设置为字符串或一个返回值为 <code>string</code> 的 <code>function</code>。</p><p>使用类 JSX 语法来定义一个简单的矩形:</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerNode</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;rect-xml&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  (</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#CE9178;"> \`</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &lt;rect style={{</span>
<span class="line">    width: 100, height: 20, fill: &#39;#1890ff&#39;, stroke: &#39;#1890ff&#39;, radius: [6, 6, 0, 0]</span>
<span class="line">  }} keyshape=&quot;true&quot; name=&quot;test&quot;&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">    &lt;text style={{ </span>
<span class="line">			marginTop: 2, </span>
<span class="line">			marginLeft: 50, </span>
<span class="line">      textAlign: &#39;center&#39;, </span>
<span class="line">      fontWeight: &#39;bold&#39;, </span>
<span class="line">      fill: &#39;#fff&#39; }} </span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">			name=&quot;title&quot;&gt;</span><span style="color:#569CD6;">\${</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">label</span><span style="color:#D4D4D4;"> || </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">id</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&lt;/text&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">    &lt;polygon style={{</span>
<span class="line">      points:[[ 30, 30 ], [ 40, 20 ], [ 30, 50 ], [ 60, 100 ]],</span>
<span class="line">          fill: &#39;red&#39;</span>
<span class="line">    }} /&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">        &lt;polyline style={{ points: [[ 30, 30 ], [ 40, 20 ], [ 60, 100 ]] }} /&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">        &lt;image style={{ img: &#39;https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png&#39;, width: 48, height: 48, marginTop: 100 }} /&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &lt;/rect&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">\`</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用-react-定义节点" tabindex="-1"><a class="header-anchor" href="#使用-react-定义节点"><span>使用 React 定义节点</span></a></h4><p>https://g6.antv.antgroup.com/manual/middle/elements/nodes/react-node</p><p><a href="https://dicegraph.github.io/g6-react-node/" target="_blank" rel="noopener noreferrer">G6 React Node Docs</a></p><p>首先在安装完 G6 后，你需要额外安装 <code>@antv/g6-react-node</code></p><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-bash;"><code><span class="line"><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> install</span><span style="color:#CE9178;"> @antv/g6-react-node</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">//</span><span style="color:#CE9178;"> yarn</span><span style="color:#CE9178;"> add</span><span style="color:#CE9178;"> @antv/g6-react-node</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> React</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &#39;react&#39;</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> G6</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &#39;@antv/g6&#39;</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">Rect</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Text</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Circle</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Image</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Group</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">createNodeFromReact</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;@antv/g6-react-node&#39;</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#DCDCAA;"> Tag</span><span style="color:#D4D4D4;"> = ({ </span><span style="color:#9CDCFE;">text</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">color</span><span style="color:#D4D4D4;"> }) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> (</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">  &lt;</span><span style="color:#4EC9B0;">Rect</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    style</span><span style="color:#F44747;">={{</span>
<span class="line">      fill: color,</span>
<span class="line">      padding: [5, 10],</span>
<span class="line">      width: &#39;auto&#39;,</span>
<span class="line">      radius: [4],</span>
<span class="line">      margin: [0, 8],</span>
<span class="line">    }}</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">  &gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">    &lt;</span><span style="color:#4EC9B0;">Text</span><span style="color:#9CDCFE;"> style</span><span style="color:#F44747;">={{ fill: &#39;#fff&#39;, fontSize: 10 }}&gt;{text}&lt;/Text&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#F44747;">  &lt;/Rect&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#F44747;">);</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">const</span><span style="color:#9CDCFE;"> Card</span><span style="color:#F44747;"> =</span><span style="color:#F44747;"> ({</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#F44747;"> })</span><span style="color:#F44747;"> =&gt;</span><span style="color:#569CD6;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  const</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">collapsed</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;"> } = </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  return</span><span style="color:#D4D4D4;"> (</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">    &lt;</span><span style="color:#4EC9B0;">Group</span><span style="color:#9CDCFE;"> draggable</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">      &lt;</span><span style="color:#4EC9B0;">Rect</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        style</span><span style="color:#F44747;">={{</span>
<span class="line">          width: 400,</span>
<span class="line">          height: &#39;auto&#39;,</span>
<span class="line">          fill: &#39;#fff&#39;,</span>
<span class="line">          stroke: &#39;#ddd&#39;,</span>
<span class="line">          shadowColor: &#39;#eee&#39;,</span>
<span class="line">          shadowBlur: 30,</span>
<span class="line">          radius: [8],</span>
<span class="line">          justifyContent: &#39;center&#39;,</span>
<span class="line">          padding: [18, 0],</span>
<span class="line">        }}</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        draggable</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">      &gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">        &lt;</span><span style="color:#4EC9B0;">Text</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          style</span><span style="color:#F44747;">={{</span>
<span class="line">            fill: &#39;#000&#39;,</span>
<span class="line">            margin: [0, 24],</span>
<span class="line">            fontSize: 16,</span>
<span class="line">            fontWeight: &#39;bold&#39;,</span>
<span class="line">          }}</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">        &gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          这是一个卡片</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">        &lt;/</span><span style="color:#4EC9B0;">Text</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">        &lt;</span><span style="color:#4EC9B0;">Text</span><span style="color:#9CDCFE;"> style</span><span style="color:#F44747;">={{ fill: &#39;#ccc&#39;, fontSize: 12, margin: [12, 24] }}&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#F44747;">          我是一段特别特别特别特别特别特别特别长的描述</span></span></span>
<span class="line"><span class="line"><span style="color:#F44747;">        &lt;/Text&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">        {</span><span style="color:#9CDCFE;">collapsed</span><span style="color:#D4D4D4;"> &amp;&amp; (</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">          &lt;</span><span style="color:#4EC9B0;">Group</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">            &lt;</span><span style="color:#4EC9B0;">Image</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              style</span><span style="color:#F44747;">={{</span>
<span class="line">                img: &#39;https://gw.alipayobjects.com/zos/antfincdn/aPkFc8Sj7n/method-draw-image.svg&#39;,</span>
<span class="line">                width: 200,</span>
<span class="line">                height: 200,</span>
<span class="line">                margin: [24, &#39;auto&#39;],</span>
<span class="line">              }}</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">            /&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">            &lt;</span><span style="color:#4EC9B0;">Rect</span><span style="color:#9CDCFE;"> style</span><span style="color:#F44747;">={{ width: &#39;auto&#39;, flexDirection: &#39;row&#39;, padding: [4, 12] }}&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#F44747;">              &lt;Tag</span><span style="color:#9CDCFE;"> color</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#66ccff&quot;</span><span style="color:#9CDCFE;"> text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;我是&quot;</span><span style="color:#808080;"> /&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">              &lt;</span><span style="color:#4EC9B0;">Tag</span><span style="color:#9CDCFE;"> color</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#66ccff&quot;</span><span style="color:#9CDCFE;"> text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;很多个&quot;</span><span style="color:#808080;"> /&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">              &lt;</span><span style="color:#4EC9B0;">Tag</span><span style="color:#9CDCFE;"> color</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#66ccff&quot;</span><span style="color:#9CDCFE;"> text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;很多个的&quot;</span><span style="color:#808080;"> /&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">              &lt;</span><span style="color:#4EC9B0;">Tag</span><span style="color:#9CDCFE;"> color</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;#66ccff&quot;</span><span style="color:#9CDCFE;"> text</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;标签&quot;</span><span style="color:#808080;"> /&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">            &lt;/</span><span style="color:#4EC9B0;">Rect</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          &lt;/</span><span style="color:#9CDCFE;">Group</span><span style="color:#D4D4D4;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        )</span><span style="color:#569CD6;">}</span></span></span>
<span class="line"><span class="line"><span style="color:#F44747;">        &lt;Circle</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          style</span><span style="color:#F44747;">={{</span>
<span class="line">            position: &#39;absolute&#39;,</span>
<span class="line">            x: 380,</span>
<span class="line">            y: 20,</span>
<span class="line">            r: 5,</span>
<span class="line">            fill: collapsed ? &#39;blue&#39; : &#39;green&#39;,</span>
<span class="line">          }}</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">        &gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">          &lt;</span><span style="color:#4EC9B0;">Text</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            style</span><span style="color:#F44747;">={{</span>
<span class="line">              fill: &#39;#fff&#39;,</span>
<span class="line">              fontSize: 10,</span>
<span class="line">              margin: [-6, -3, 0],</span>
<span class="line">              cursor: &#39;pointer&#39;,</span>
<span class="line">            }}</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            onClick</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">{</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">evt</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">node</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">shape</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">updateItem</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">node</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">                collapsed:</span><span style="color:#D4D4D4;"> !</span><span style="color:#9CDCFE;">collapsed</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">              });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            }</span><span style="color:#569CD6;">}</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">          &gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">            {</span><span style="color:#9CDCFE;">collapsed</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;-&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;+&#39;</span><span style="color:#569CD6;">}</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">          &lt;/</span><span style="color:#4EC9B0;">Text</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">        &lt;/</span><span style="color:#4EC9B0;">Circle</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">      &lt;/</span><span style="color:#4EC9B0;">Rect</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">    &lt;/</span><span style="color:#4EC9B0;">Group</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  );</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">}</span><span style="color:#F44747;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F44747;">G6.registerNode(&#39;test&#39;,</span><span style="color:#F44747;"> createNodeFromReact(Card));</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="边" tabindex="-1"><a class="header-anchor" href="#边"><span>边</span></a></h3><h4 id="边的配置方法" tabindex="-1"><a class="header-anchor" href="#边的配置方法"><span>边的配置方法</span></a></h4><p>优先级：使用 graph.edge(edgeFn) 配置 &gt; 数据中动态配置 &gt; 实例化图时全局配置</p><p>即有相同的配置项时，优先级高的方式将会覆盖优先级低的。</p><p><strong>1、实例化图时全局配置</strong></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  container:</span><span style="color:#CE9178;"> &#39;mountNode&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  width:</span><span style="color:#B5CEA8;"> 800</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  height:</span><span style="color:#B5CEA8;"> 600</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  defaultEdge:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;line&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // ... 其他配置</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2、数据中动态配置</strong></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> data</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  nodes:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ... </span><span style="color:#6A9955;">// 节点</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  edges:</span><span style="color:#D4D4D4;"> [{</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    source:</span><span style="color:#CE9178;"> &#39;node0&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    target:</span><span style="color:#CE9178;"> &#39;node1&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&#39;polyline&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ... </span><span style="color:#6A9955;">// 其他配置</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    style</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ...  </span><span style="color:#6A9955;">// 样式属性，每种边的详细样式属性参见各边文档</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },{</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    source:</span><span style="color:#CE9178;"> &#39;node1&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    target:</span><span style="color:#CE9178;"> &#39;node2&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&#39;cubic&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ... </span><span style="color:#6A9955;">// 其他配置</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    style</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ...  </span><span style="color:#6A9955;">// 样式属性，每种边的详细样式属性参见各边文档</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ... </span><span style="color:#6A9955;">// 其他边</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ]</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3、graph.edge(edgeFn) 配置</strong></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// const data = ...</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// const graph = ...</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">edge</span><span style="color:#D4D4D4;">((</span><span style="color:#9CDCFE;">edge</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">  return</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    id:</span><span style="color:#9CDCFE;"> edge</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;polyline&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    style:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      fill:</span><span style="color:#CE9178;"> &#39;steelblue&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  };</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">data</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">render</span><span style="color:#D4D4D4;">();</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="内置边" tabindex="-1"><a class="header-anchor" href="#内置边"><span>内置边</span></a></h4><p>https://g6.antv.antgroup.com/manual/middle/elements/edges/built-in/line</p><ul><li>line：直线，不支持控制点；</li><li>polyline：折线，支持多个控制点；</li><li>arc：圆弧线；</li><li>quadratic：二阶贝塞尔曲线；</li><li>cubic：三阶贝塞尔曲线；</li><li>cubic-vertical：垂直方向的三阶贝塞尔曲线，不考虑用户从外部传入的控制点；</li><li>cubic-horizontal：水平方向的三阶贝塞尔曲线，不考虑用户从外部传入的控制点；</li><li>loop：自环。</li></ul><h4 id="箭头" tabindex="-1"><a class="header-anchor" href="#箭头"><span>箭头</span></a></h4><p>内置箭头：https://g6.antv.antgroup.com/manual/middle/elements/edges/arrow#%E5%86%85%E7%BD%AE%E7%AE%AD%E5%A4%B4</p><p>使用方法：</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#C8C8C8;">style</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">  endArrow</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">    path</span><span style="color:#D4D4D4;">: </span><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">Arrow</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">triangle</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">20</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">25</span><span style="color:#D4D4D4;">), </span><span style="color:#6A9955;">// 使用内置箭头路径函数，参数为箭头的 宽度、长度、偏移量（默认为 0，与 d 对应）</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">    d</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">25</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">  startArrow</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">    path</span><span style="color:#D4D4D4;">: </span><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">Arrow</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">vee</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">15</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">20</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">15</span><span style="color:#D4D4D4;">), </span><span style="color:#6A9955;">// 使用内置箭头路径函数，参数为箭头的 宽度、长度、偏移量（默认为 0，与 d 对应）</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">    d</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">15</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="自定义边" tabindex="-1"><a class="header-anchor" href="#自定义边"><span>自定义边</span></a></h4><p>自定义元素 G6.registerX： https://g6.antv.antgroup.com/api/register-item</p><p>当内置的边不能满足需求时，可以通过 <code>registerEdge(edgeName, options, extendedEdgeName)</code> 方法注册自定义的边。</p><p>参数：</p><table><thead><tr><th>edgeName</th><th>String</th><th>true</th><th>自定义边的名称</th></tr></thead><tbody><tr><td>options</td><td>Object</td><td>true</td><td>自定义边时的配置项，配置项中包括完整的生命周期方法，具体请参考：<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/elements/shape/shape-keyshape" target="_blank" rel="noopener noreferrer">Shape Doc</a> 和 <a href="https://g6.antv.antgroup.com/zh/docs/api/register-item" target="_blank" rel="noopener noreferrer">自定义节点与边 API</a>。</td></tr><tr><td>extendedEdgeName</td><td>String</td><td>false</td><td>自定义边时可基于内置边进行定义，该字段表示内置边的名称，所有内置边请参考：<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/elements/edges/defaultEdge" target="_blank" rel="noopener noreferrer">内置边</a> 教程。</td></tr></tbody></table><p><strong>需要注意的是</strong>，自定义边/节点时，若给定了 <code>extendedEdgeName</code>，如 <code>draw</code>，<code>update</code>，<code>setState</code> 等必要的函数若不在 <code>edgeDefinition</code> 中进行复写，将会继承 <code>extendedEdgeName</code> 中的相关定义</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerEdge</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;edgeName&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 绘制边，包含文本</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#6A9955;"> 边的配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {G.Group}</span><span style="color:#9CDCFE;"> group</span><span style="color:#6A9955;"> 图形分组，边中的图形对象的容器</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@return</span><span style="color:#4EC9B0;"> {G.Shape}</span><span style="color:#6A9955;"> 绘制的图形，通过 node.get(&#39;keyShape&#39;) 可以获取到</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    draw</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 绘制后的附加操作，默认没有任何操作</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#6A9955;"> 边的配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {G.Group}</span><span style="color:#9CDCFE;"> group</span><span style="color:#6A9955;"> 图形分组，边中的图形对象的容器</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    afterDraw</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 更新边，包含文本</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@override</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#6A9955;"> 边的配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Edge}</span><span style="color:#9CDCFE;"> edge</span><span style="color:#6A9955;"> 边</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    update</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">edge</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 更新边后的操作，一般同 afterDraw 配合使用</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@override</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#6A9955;"> 边的配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Edge}</span><span style="color:#9CDCFE;"> edge</span><span style="color:#6A9955;"> 边</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    afterUpdate</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">edge</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    /**</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 设置边的状态，主要是交互状态，业务状态请在 draw 方法中实现</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * 单图形的边仅考虑 selected、active 状态，有其他状态需求的用户自己复写这个方法</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {String}</span><span style="color:#9CDCFE;"> name</span><span style="color:#6A9955;"> 状态名称</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Object}</span><span style="color:#9CDCFE;"> value</span><span style="color:#6A9955;"> 状态值</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     * </span><span style="color:#569CD6;">@param</span><span style="color:#4EC9B0;">  {Edge}</span><span style="color:#9CDCFE;"> edge</span><span style="color:#6A9955;"> 边</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">     */</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    setState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">edge</span><span style="color:#D4D4D4;">) {},</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;extendedEdgeName&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="调整边的交互样式" tabindex="-1"><a class="header-anchor" href="#调整边的交互样式"><span>调整边的交互样式</span></a></h4><ul><li>在 G6 中自定义节点/边时在 <code>setState</code> 方法中进行边状态变化的响应；</li><li>通过 <code>graph.setItemState()</code> 方法来设置状态。</li></ul><p><strong>⚠️注意:</strong></p><p>边过细时点击很难被击中，可以设置 <code>lineAppendWidth</code> 来提升击中范围。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// 基于 line 扩展出新的边</span></span></span>
<span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerEdge</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;custom-edge&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 响应状态变化</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    setState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> group</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getContainer</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> shape</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;children&#39;</span><span style="color:#D4D4D4;">)[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">]; </span><span style="color:#6A9955;">// 顺序根据 draw 时确定</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;"> === </span><span style="color:#CE9178;">&#39;active&#39;</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">        if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          shape</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;stroke&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;red&#39;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        } </span><span style="color:#C586C0;">else</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          shape</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;stroke&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;#333&#39;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      }</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;"> === </span><span style="color:#CE9178;">&#39;selected&#39;</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">        if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          shape</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;lineWidth&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">3</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        } </span><span style="color:#C586C0;">else</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          shape</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;lineWidth&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;line&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 点击时选中，再点击时取消</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;edge:click&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> edge</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">edge</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;selected&#39;</span><span style="color:#D4D4D4;">, !</span><span style="color:#9CDCFE;">edge</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">hasState</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;selected&#39;</span><span style="color:#D4D4D4;">)); </span><span style="color:#6A9955;">// 切换选中</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;edge:mouseenter&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> edge</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">edge</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;active&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;edge:mouseleave&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> edge</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">edge</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;active&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="图布局" tabindex="-1"><a class="header-anchor" href="#图布局"><span>图布局</span></a></h2><p>图布局是指图中节点的排布方式，根据图的数据结构不同，布局可以分为两类：一般图布局、树图布局。</p><h3 id="一般图布局" tabindex="-1"><a class="header-anchor" href="#一般图布局"><span>一般图布局</span></a></h3><p><a href="https://g6.antv.antgroup.com/manual/middle/layout/graph-layout#%E4%B8%80%E8%88%AC%E5%9B%BE-graph-%E5%B8%83%E5%B1%80%E6%96%B9%E6%B3%95%E6%80%BB%E8%A7%88" target="_blank" rel="noopener noreferrer">一般图 Graph 布局方法总览</a></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // ...                      // 其他配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  layout:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // Object，可选，布局的方法及其配置项，默认为 random 布局。</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;force&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    preventOverlap:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    nodeSize:</span><span style="color:#B5CEA8;"> 30</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // workerEnabled: true, // 是否启用 webworker</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // gpuEnabled: true // 是否使用 gpu 版本的布局算法，G6 4.0 支持，目前仅支持 gForce 及 fruchterman</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // ...                    // 其他配置</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="树图布局" tabindex="-1"><a class="header-anchor" href="#树图布局"><span>树图布局</span></a></h3><p><a href="https://g6.antv.antgroup.com/manual/middle/layout/tree-graph-layout#%E6%A0%91%E5%9B%BE%E5%B8%83%E5%B1%80%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">树图 TreeGraph 布局方法总览</a></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">TreeGraph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  container:</span><span style="color:#CE9178;"> &#39;mountNode&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  modes:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    default:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">        // 定义展开/收缩行为</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        type:</span><span style="color:#CE9178;"> &#39;collapse-expand&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">      &#39;drag-canvas&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // 定义布局</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  layout:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;dendrogram&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 布局类型</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    direction:</span><span style="color:#CE9178;"> &#39;LR&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 自左至右布局，可选的有 H / V / LR / RL / TB / BT</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    nodeSep:</span><span style="color:#B5CEA8;"> 50</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 节点之间间距</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    rankSep:</span><span style="color:#B5CEA8;"> 100</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 每个层级之间的间距</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    excludeInvisibles:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 布局计算是否排除掉隐藏的节点，v4.8.8 起支持</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>通用配置项</strong></p><table><thead><tr><th style="text-align:left;">名称</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">type</td><td style="text-align:left;">String</td><td style="text-align:left;">dendrogram</td><td style="text-align:left;">布局类型，支持 dendrogram、compactBox、mindmap 和 indented。</td></tr><tr><td style="text-align:left;">excludeInvisibles</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;"><em>v4.8.8 起支持。</em> 布局计算是否排除掉隐藏的节点，若配置为 true，则隐藏节点不参与布局计算。</td></tr><tr><td style="text-align:left;">direction</td><td style="text-align:left;">String</td><td style="text-align:left;">LR</td><td style="text-align:left;">布局方向，有 <code>LR</code> , <code>RL</code> , <code>TB</code> , <code>BT</code> , <code>H</code> , <code>V</code> 可选。 L：左；R：右；T：上；B：下；H：垂直；V：水平。</td></tr><tr><td style="text-align:left;">getChildren</td><td style="text-align:left;">Function</td><td style="text-align:left;"></td><td style="text-align:left;">返回当前节点的所有子节点</td></tr></tbody></table><p><strong>类型</strong></p><table><thead><tr><th>类型</th><th>描述</th><th>图示说明</th></tr></thead><tbody><tr><td><a href="https://g6.antv.antgroup.com/api/tree-graph-layout/compact-box" target="_blank" rel="noopener noreferrer">compactBox</a></td><td>紧凑树布局：从根节点开始，同一深度的节点在同一层，并且布局时会将节点大小考虑进去。</td><td><img src="https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*FltbQZAa-nMAAAAAAAAAAABkARQnAQ" alt="img"></td></tr><tr><td><a href="https://g6.antv.antgroup.com/api/tree-graph-layout/dendrogram" target="_blank" rel="noopener noreferrer">dendrogram</a></td><td>树状布局：不管数据的深度多少，总是叶节点对齐。不考虑节点大小，布局时将节点视为 1 个像素点。</td><td><img src="https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*XehWSKAWdrwAAAAAAAAAAABkARQnAQ" alt="img" style="zoom:50%;"></td></tr><tr><td><a href="https://g6.antv.antgroup.com/api/tree-graph-layout/indented" target="_blank" rel="noopener noreferrer">indented</a></td><td>缩进布局：每个元素会占一行/一列。</td><td><img src="https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*zuBlR4oBIE0AAAAAAAAAAABkARQnAQ" alt="img" style="zoom:50%;"></td></tr><tr><td><a href="https://g6.antv.antgroup.com/api/tree-graph-layout/mindmap" target="_blank" rel="noopener noreferrer">mindmap</a></td><td>脑图布局：深度相同的节点将会被放置在同一层，与 compactBox 不同的是，布局不会考虑节点的大小。</td><td><img src="https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*sRi6Q6Qrm-oAAAAAAAAAAABkARQnAQ" alt="img" style="zoom:50%;"></td></tr></tbody></table><h3 id="布局的切换机制" tabindex="-1"><a class="header-anchor" href="#布局的切换机制"><span>布局的切换机制</span></a></h3><ul><li><code>updateLayout(params)</code>：布局方法或参数的切换；</li><li><code>changeData()</code>：数据的切换。</li></ul><h2 id="交互与事件" tabindex="-1"><a class="header-anchor" href="#交互与事件"><span>交互与事件</span></a></h2><h3 id="监听事件" tabindex="-1"><a class="header-anchor" href="#监听事件"><span>监听事件</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;canvas:click&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> shape</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">target</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> item</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">  if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    const</span><span style="color:#4FC1FF;"> type</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getType</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>事件类型</strong></p><p>1、<strong>全局事件</strong>：只要在画布上范围内发生均会被触发，如 <code>mousedown</code>，<code>mouseup</code>，<code>click</code>，<code>mouseenter</code>，<code>mouseleave</code> 等。</p><p>2、<strong>canvas 事件</strong>：只在 canvas 空白处被触发，如 <code>canvas:mousedown</code>，<code>canvas:click</code> 等，以<code>canvas:eventName</code> 为事件名称。</p><p>3、节点/边/combo 上的事件，例如 <code>node:mousedown</code>，<code>edge:click</code>, <code>combo:click</code> 等，以 <code>type:eventName</code> 为事件名称。</p><p>4、<strong>图形上的事件</strong>：指定图形上的事件，如 <code>circle-shape:mousedown</code>，<code>circle-shape:click</code> 等，以 <code>shapeName:eventName</code> 为事件名称。</p><p>5、<strong>时机事件</strong>：时机事件指渲染、视口变换、元素增删改、数据变换等时机。所有时机事件详见 <a href="https://g6.antv.antgroup.com/zh/docs/api/Event#%E5%9B%9E%E8%B0%83%E5%8F%82%E6%95%B0" target="_blank" rel="noopener noreferrer">G6 的时机事件列表</a>。如：<code>beforeadditem</code>，<code>afteradditem</code> 等。</p><p>6、<strong>自定义事件</strong>：G6 允许用户自定义任意事件，可在任意位置通过 <code>graph.emit(customEventName: string, event: IG6GraphEvent)</code> 触发一个事件，第一个参数为自定义事件名称。在触发前，通过 <code>graph.on(customEventName: string, callback: Function)</code> 进行监听。</p><p>例：</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;some-custom-event-name&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">ev</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // ... do sth</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">emit</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;some-custom-event-name&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // some params</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">})</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="交互行为behavior" tabindex="-1"><a class="header-anchor" href="#交互行为behavior"><span>交互行为Behavior</span></a></h3><p>Behavior 是 G6 提供的定义图上交互事件的机制。它与<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/states/mode" target="_blank" rel="noopener noreferrer">交互模式 Mode</a> 搭配使用，如何将下文所述各种 Behavior 配置到图上，见 <a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/states/mode" target="_blank" rel="noopener noreferrer">交互模式</a>。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  container:</span><span style="color:#CE9178;"> &#39;mountNode&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  width:</span><span style="color:#B5CEA8;"> 500</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  height:</span><span style="color:#B5CEA8;"> 500</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  modes:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 支持的 behavior</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    default:</span><span style="color:#D4D4D4;"> [</span><span style="color:#CE9178;">&#39;drag-canvas&#39;</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="内置behavior" tabindex="-1"><a class="header-anchor" href="#内置behavior"><span><a href="https://g6.antv.antgroup.com/manual/middle/states/default-behavior#%E5%86%85%E7%BD%AE-behavior" target="_blank" rel="noopener noreferrer">内置behavior</a></span></a></h4><p>常用：</p><p><a href="https://g6.antv.antgroup.com/manual/middle/states/default-behavior#drag-canvas" target="_blank" rel="noopener noreferrer">drag-canvas</a>：拖拽画布</p><p><a href="https://g6.antv.antgroup.com/manual/middle/states/default-behavior#zoom-canvas" target="_blank" rel="noopener noreferrer">zoom-canvas</a>：缩放画布</p><p><a href="https://g6.antv.antgroup.com/manual/middle/states/default-behavior#tooltip" target="_blank" rel="noopener noreferrer">tooltip</a>：文本节点提示</p><p><a href="https://g6.antv.antgroup.com/manual/middle/states/default-behavior#collapse-expand" target="_blank" rel="noopener noreferrer">collapse-expand</a>：只适用于树图，展开或收起子树</p><h4 id="自定义behavior" tabindex="-1"><a class="header-anchor" href="#自定义behavior"><span>自定义behavior</span></a></h4><p>通过 <code>G6.registerBehavior</code> 自定义 Behavior。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerBehavior</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;activate-node&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  getDefaultCfg</span><span style="color:#D4D4D4;">() {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    return</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      multiple:</span><span style="color:#569CD6;"> true</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    };</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  getEvents</span><span style="color:#D4D4D4;">() {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    return</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">      &#39;node:click&#39;</span><span style="color:#9CDCFE;">:</span><span style="color:#CE9178;"> &#39;onNodeClick&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">      &#39;canvas:click&#39;</span><span style="color:#9CDCFE;">:</span><span style="color:#CE9178;"> &#39;onCanvasClick&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    };</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  }</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  onNodeClick</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    const</span><span style="color:#4FC1FF;"> item</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">hasState</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;active&#39;</span><span style="color:#D4D4D4;">)) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;active&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      return</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // this 上即可取到配置，如果不允许多个 &#39;active&#39;，先取消其他节点的 &#39;active&#39; 状态</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">multiple</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      this</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">removeNodesState</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 置点击的节点状态 &#39;active&#39; 为 true</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;active&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  onCanvasClick</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // shouldUpdate 可以由用户复写，返回 true 时取消所有节点的 &#39;active&#39; 状态，即将 &#39;active&#39; 状态置为 false</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">shouldUpdate</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">self</span><span style="color:#D4D4D4;">)) {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">      removeNodesState</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  removeNodesState</span><span style="color:#D4D4D4;">() {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">findAllByState</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;node&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;active&#39;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">forEach</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">node</span><span style="color:#569CD6;"> =&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">node</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;active&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用自定义behavior</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  container:</span><span style="color:#CE9178;"> &#39;mountNode&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  width:</span><span style="color:#B5CEA8;"> 500</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  height:</span><span style="color:#B5CEA8;"> 500</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  modes:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 定义的 Behavior 指定到这里，就可以支持 Behavior 中定义的交互</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    default:</span><span style="color:#D4D4D4;"> [</span><span style="color:#CE9178;">&#39;activate-node&#39;</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="交互模式mode" tabindex="-1"><a class="header-anchor" href="#交互模式mode"><span>交互模式Mode</span></a></h4><p>一个图上可以有存在多种交互模式，每个交互模式包含多种交互行为 <a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/states/default-behavior" target="_blank" rel="noopener noreferrer">Behavior</a>。</p><p><strong>配置mode</strong></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  container:</span><span style="color:#CE9178;"> &#39;mountNode&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  width:</span><span style="color:#B5CEA8;"> 500</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  height:</span><span style="color:#B5CEA8;"> 500</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  modes:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 支持的 behavior</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    default:</span><span style="color:#D4D4D4;"> [</span><span style="color:#CE9178;">&#39;drag-canvas&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;zoom-canvas&#39;</span><span style="color:#D4D4D4;">], </span><span style="color:#6A9955;">// 默认模式下的交互行为</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    edit:</span><span style="color:#D4D4D4;"> [</span><span style="color:#CE9178;">&#39;click-select&#39;</span><span style="color:#D4D4D4;">],	</span><span style="color:#6A9955;">// 编辑模式下的交互行为</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>切换mode</strong></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setMode</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;edit&#39;</span><span style="color:#D4D4D4;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="状态state" tabindex="-1"><a class="header-anchor" href="#状态state"><span>状态State</span></a></h3><p>https://g6.antv.antgroup.com/manual/middle/states/state</p><p>G6 中的 <strong>state</strong>，指的是节点或边的状态，包括<strong>交互状态</strong>和<strong>业务状态</strong>两种。</p><p><strong>设置state</strong></p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">stateName</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">stateValue</span><span style="color:#D4D4D4;">)</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">参数名</th><th style="text-align:left;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">item</td><td style="text-align:left;">Number</td><td style="text-align:left;">需要被设置状态的节点/边实例</td></tr><tr><td style="text-align:left;">stateName</td><td style="text-align:left;">String</td><td style="text-align:left;">状态名称，可以是任意字符串</td></tr><tr><td style="text-align:left;">stateValue</td><td style="text-align:left;">Booelean</td><td style="text-align:left;">true 代表该状态是被激活，false 代表该状态被灭活</td></tr></tbody></table><p><strong>调用state</strong></p><p>该函数可以在监听函数 <code>graph.on</code> 中被调用，也可以在自定义 Behavior 中调用，或在其他任意地方用于响应交互/业务的变化。</p><p><strong>1、graph.on</strong></p><p>在回调函数中使定义的交互状态 hover 生效。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;node:mouseenter&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">evt</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> { </span><span style="color:#4FC1FF;">item</span><span style="color:#D4D4D4;"> } = </span><span style="color:#9CDCFE;">evt</span><span style="color:#D4D4D4;">;  </span><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;hover&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">);});</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;node:mouseleave&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">evt</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> { </span><span style="color:#4FC1FF;">item</span><span style="color:#D4D4D4;"> } = </span><span style="color:#9CDCFE;">evt</span><span style="color:#D4D4D4;">;  </span><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;hover&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">);});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2、Behavior</strong></p><p>在自定义 Behavior 中使定义的交互状态 selected 生效。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerBehavior</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;nodeClick&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  getEvents</span><span style="color:#D4D4D4;">() {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    return</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">      &#39;node:click&#39;</span><span style="color:#9CDCFE;">:</span><span style="color:#CE9178;"> &#39;onClick&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    };</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  onClick</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    e</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">preventDefault</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">shouldUpdate</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">call</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">)) {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      return</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    const</span><span style="color:#D4D4D4;"> { </span><span style="color:#4FC1FF;">item</span><span style="color:#D4D4D4;"> } = </span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">graph</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    graph</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;selected&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="基础动画" tabindex="-1"><a class="header-anchor" href="#基础动画"><span>基础动画</span></a></h2><h3 id="全局动画" tabindex="-1"><a class="header-anchor" href="#全局动画"><span>全局动画</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> graph</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">Graph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // ...                   // 图的其他配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  animate:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Boolean，切换布局时是否使用动画过度，默认为 false</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  animateCfg:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    duration:</span><span style="color:#B5CEA8;"> 500</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Number，一次动画的时长</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    easing:</span><span style="color:#CE9178;"> &#39;linearEasing&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// String，动画函数</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">配置项</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">duration</td><td style="text-align:left;">Number</td><td style="text-align:left;">500</td><td style="text-align:left;">一次动画的时长</td></tr><tr><td style="text-align:left;">easing</td><td style="text-align:left;">boolean</td><td style="text-align:left;">&#39;linearEasing&#39;</td><td style="text-align:left;">动画函数，见 <a href="https://g6.antv.antgroup.com/manual/middle/animation#easing-%E5%87%BD%E6%95%B0" target="_blank" rel="noopener noreferrer">easing 函数</a></td></tr><tr><td style="text-align:left;">delay</td><td style="text-align:left;">Number</td><td style="text-align:left;">0</td><td style="text-align:left;">延迟一段时间后执行动画</td></tr><tr><td style="text-align:left;">repeat</td><td style="text-align:left;">boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否重复执行动画</td></tr><tr><td style="text-align:left;">callback</td><td style="text-align:left;">Function</td><td style="text-align:left;">undefined</td><td style="text-align:left;">动画执行完时的回调函数</td></tr><tr><td style="text-align:left;">pauseCallback</td><td style="text-align:left;">Function</td><td style="text-align:left;">undefined</td><td style="text-align:left;">动画暂停时（<code>shape.pause()</code>）的回调函数</td></tr><tr><td style="text-align:left;">resumeCallback</td><td style="text-align:left;">Function</td><td style="text-align:left;">undefined</td><td style="text-align:left;">动画恢复时（<code>shape.resume()</code>）的回调函数</td></tr></tbody></table><h3 id="元素-边和节点-动画" tabindex="-1"><a class="header-anchor" href="#元素-边和节点-动画"><span>元素（边和节点）动画</span></a></h3><p>由于 G6 的内置节点和边是没有动画的，需要实现节点和边上的动画需要通过<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/elements/nodes/custom-node" target="_blank" rel="noopener noreferrer">自定义节点</a>、<a href="https://g6.antv.antgroup.com/zh/docs/manual/middle/elements/edges/custom-edge" target="_blank" rel="noopener noreferrer">自定义边</a>时复写 <code>afterDraw</code> 实现。</p><p>https://g6.antv.antgroup.com/manual/middle/animation#%E5%85%83%E7%B4%A0%E5%8A%A8%E7%94%BB</p><h2 id="树图实际应用" tabindex="-1"><a class="header-anchor" href="#树图实际应用"><span>树图实际应用</span></a></h2><p>需求说明：</p><ul><li><p>按集团架构分层展示组织名称及其碳强度信息，默认展开第一个二级企业及其下级企业的卡片</p></li><li><p>每个二级企业及其下级企业的卡片为一种颜色</p></li><li><p>可展开收起卡片，收起时显示子项数量</p></li></ul><p>实现效果：</p><p><img src="`+e+`" alt="集团架构碳强度分析"></p><p>完整代码：<a href="https://github.com/csmSimona/csmSimona.github.io/blob/main/docs/antv%20G6%E7%9A%84%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E5%8F%8A%E6%A0%91%E5%9B%BE%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8/%E4%BB%A3%E7%A0%81/TreeGraph/index.jsx" target="_blank" rel="noopener noreferrer">TreeGraph</a></p><h3 id="_1、初始化图、数据处理" tabindex="-1"><a class="header-anchor" href="#_1、初始化图、数据处理"><span>1、初始化图、数据处理</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> container</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">document</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getElementById</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;container&#39;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> width</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">container</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">scrollWidth</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> height</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">container</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">scrollHeight</span><span style="color:#D4D4D4;"> || </span><span style="color:#B5CEA8;">500</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#4FC1FF;"> G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">TreeGraph</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  container:</span><span style="color:#CE9178;"> &#39;container&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  width</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  height</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  defaultZoom:</span><span style="color:#B5CEA8;"> 0.8</span><span style="color:#D4D4D4;">,	</span><span style="color:#6A9955;">// 默认缩放比例</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  minZoom:</span><span style="color:#B5CEA8;"> 0.5</span><span style="color:#D4D4D4;">,	</span><span style="color:#6A9955;">// 最小可缩放比例</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  modes:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    default:</span><span style="color:#D4D4D4;"> [</span><span style="color:#CE9178;">&#39;zoom-canvas&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;drag-canvas&#39;</span><span style="color:#D4D4D4;">],	</span><span style="color:#6A9955;">// 可缩放，可拖拽</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  fitView:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  animate:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  renderer:</span><span style="color:#CE9178;"> &#39;svg&#39;</span><span style="color:#D4D4D4;">,	</span><span style="color:#6A9955;">// 使用svg渲染（用于自定义dom节点）</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  defaultNode:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;flow-rect&#39;</span><span style="color:#D4D4D4;">,	</span><span style="color:#6A9955;">// 配置自定义节点名称</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  defaultEdge:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;indentedEdge&#39;</span><span style="color:#D4D4D4;">,	</span><span style="color:#6A9955;">// 配置自定义边名称</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  layout:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    type:</span><span style="color:#CE9178;"> &#39;indented&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 布局类型 缩进树</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    direction:</span><span style="color:#CE9178;"> &#39;LR&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 自左至右布局</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    dropCap:</span><span style="color:#569CD6;"> false</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 每个节点的第一个自节点是否位于下一行</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    indent:</span><span style="color:#B5CEA8;"> 350</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 列间间距</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    getHeight</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      return</span><span style="color:#B5CEA8;"> 70</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">Math</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">floor</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">12</span><span style="color:#D4D4D4;">) * </span><span style="color:#B5CEA8;">14</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#DCDCAA;"> dataTransform</span><span style="color:#D4D4D4;"> = (</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#DCDCAA;"> changeData</span><span style="color:#D4D4D4;"> = (</span><span style="color:#9CDCFE;">d</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">level</span><span style="color:#D4D4D4;"> = </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">color</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    const</span><span style="color:#4FC1FF;"> data</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ...</span><span style="color:#9CDCFE;">d</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    };</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 给定 branchColor 和 0-2 层节点 depth</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">children</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      data</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">depth</span><span style="color:#D4D4D4;"> = </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      data</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">children</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">forEach</span><span style="color:#D4D4D4;">((</span><span style="color:#9CDCFE;">subtree</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">i</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        subtree</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">branchColor</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">colors</span><span style="color:#D4D4D4;">[</span><span style="color:#9CDCFE;">i</span><span style="color:#D4D4D4;"> % </span><span style="color:#9CDCFE;">colors</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;">];</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">        // dfs</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">        let</span><span style="color:#9CDCFE;"> currentDepth</span><span style="color:#D4D4D4;"> = </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        subtree</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">depth</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">currentDepth</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        Util</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">traverseTree</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">subtree</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">child</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          child</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">branchColor</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">colors</span><span style="color:#D4D4D4;">[</span><span style="color:#9CDCFE;">i</span><span style="color:#D4D4D4;"> % </span><span style="color:#9CDCFE;">colors</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;">];</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">          if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#9CDCFE;">child</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">depth</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            child</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">depth</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">currentDepth</span><span style="color:#D4D4D4;"> + </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          } </span><span style="color:#C586C0;">else</span><span style="color:#9CDCFE;"> currentDepth</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">subtree</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">depth</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">          if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">child</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">children</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            child</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">children</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">forEach</span><span style="color:#D4D4D4;">((</span><span style="color:#9CDCFE;">subChild</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              subChild</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">depth</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">child</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">depth</span><span style="color:#D4D4D4;"> + </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          }</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">          return</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    return</span><span style="color:#9CDCFE;"> data</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  };</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">  return</span><span style="color:#DCDCAA;"> changeData</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">};</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">data</span><span style="color:#D4D4D4;">(</span><span style="color:#DCDCAA;">dataTransform</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">render</span><span style="color:#D4D4D4;">();</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、自定义节点" tabindex="-1"><a class="header-anchor" href="#_2、自定义节点"><span>2、自定义节点</span></a></h3><ul><li>扩展现有内置节点</li><li>使用 文本、矩形、圆形、路径图形自定义节点</li><li>使用 DOM 自定义节点</li></ul><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// 扩展现有内置节点</span></span></span>
<span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerNode</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;flow-rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    shapeType:</span><span style="color:#CE9178;"> &#39;flow-rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    draw</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#4FC1FF;">        name</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#4FC1FF;">        value</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#4FC1FF;">        collapsed</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#4FC1FF;">        branchColor</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;#008599&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#4FC1FF;">        depth</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#4FC1FF;">        notEmissionControlFlag</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      } = </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> newName</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">replace</span><span style="color:#D4D4D4;">(</span><span style="color:#D16969;">/\\s/</span><span style="color:#569CD6;">g</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;&#39;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">replace</span><span style="color:#D4D4D4;">(</span><span style="color:#D16969;">/</span><span style="color:#CE9178;">(</span><span style="color:#D16969;">.</span><span style="color:#D7BA7D;">{12}</span><span style="color:#CE9178;">)</span><span style="color:#D16969;">/</span><span style="color:#569CD6;">g</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;$1</span><span style="color:#D7BA7D;">\\n</span><span style="color:#CE9178;">&#39;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> isRoot</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">depth</span><span style="color:#D4D4D4;"> === </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> grey</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;#CED4D9&#39;</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> rectConfig</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        width:</span><span style="color:#B5CEA8;"> 240</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        height:</span><span style="color:#B5CEA8;"> 92</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">Math</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">floor</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">12</span><span style="color:#D4D4D4;">) * </span><span style="color:#B5CEA8;">14</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        lineWidth:</span><span style="color:#9CDCFE;"> isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#B5CEA8;">20</span><span style="color:#D4D4D4;"> : </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        fontSize:</span><span style="color:#B5CEA8;"> 12</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        fill:</span><span style="color:#9CDCFE;"> isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;#008599&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;#fff&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        radius:</span><span style="color:#B5CEA8;"> 4</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        stroke:</span><span style="color:#9CDCFE;"> grey</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        opacity:</span><span style="color:#B5CEA8;"> 1</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      };</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 卡片原点</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> nodeOrigin</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        x:</span><span style="color:#9CDCFE;"> isRoot</span><span style="color:#D4D4D4;"> ? -</span><span style="color:#9CDCFE;">rectConfig</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">width</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;"> - </span><span style="color:#B5CEA8;">50</span><span style="color:#D4D4D4;"> : -</span><span style="color:#9CDCFE;">rectConfig</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">width</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;"> - </span><span style="color:#B5CEA8;">40</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        y:</span><span style="color:#D4D4D4;"> -</span><span style="color:#9CDCFE;">rectConfig</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">height</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      };</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> textConfig</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        textAlign:</span><span style="color:#CE9178;"> &#39;left&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        textBaseline:</span><span style="color:#CE9178;"> &#39;bottom&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      };</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> rect</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;rect&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          x:</span><span style="color:#9CDCFE;"> nodeOrigin</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          y:</span><span style="color:#9CDCFE;"> nodeOrigin</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">y</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          ...</span><span style="color:#9CDCFE;">rectConfig</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          strokeOpacity:</span><span style="color:#9CDCFE;"> isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#B5CEA8;">0.1</span><span style="color:#D4D4D4;"> : </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          stroke:</span><span style="color:#9CDCFE;"> isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;rgba(0, 133, 153)&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#9CDCFE;">branchColor</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      });</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> rectBBox</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">rect</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getBBox</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 标题</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;text&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          ...</span><span style="color:#9CDCFE;">textConfig</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          x:</span><span style="color:#B5CEA8;"> 20</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">nodeOrigin</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          y:</span><span style="color:#B5CEA8;"> 42</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">Math</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">floor</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">12</span><span style="color:#D4D4D4;">) * </span><span style="color:#B5CEA8;">14</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">nodeOrigin</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">y</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          text:</span><span style="color:#9CDCFE;"> name</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;"> &gt; </span><span style="color:#B5CEA8;">12</span><span style="color:#D4D4D4;"> ? </span><span style="color:#9CDCFE;">newName</span><span style="color:#D4D4D4;"> : </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          fontSize:</span><span style="color:#B5CEA8;"> 16</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          fill:</span><span style="color:#9CDCFE;"> isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;#fff&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;#292929&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        name:</span><span style="color:#CE9178;"> &#39;name-shape&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      });</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 数值 价格+单位</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;dom&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          x:</span><span style="color:#B5CEA8;"> 20</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">nodeOrigin</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          y:</span><span style="color:#B5CEA8;"> 56</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">Math</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">floor</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">12</span><span style="color:#D4D4D4;">) * </span><span style="color:#B5CEA8;">14</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">nodeOrigin</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">y</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          width:</span><span style="color:#B5CEA8;"> 200</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          height:</span><span style="color:#B5CEA8;"> 30</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          html:</span><span style="color:#CE9178;"> \`</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">            &lt;div style=&quot;display: </span><span style="color:#569CD6;">\${</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              value</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;flex&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;none&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">            }</span><span style="color:#CE9178;">;align-items:center;width: 100%;height: 24px;&quot;&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">              &lt;span style=&quot;color: </span><span style="color:#569CD6;">\${</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">                isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;#fff&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#9CDCFE;">branchColor</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">              }</span><span style="color:#CE9178;">;font-family: Bebas Neue;font-size: 24px;padding-right: 8px;line-height: 16px;background: </span><span style="color:#569CD6;">\${</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;rgba(255, 255, 255, 0.20)&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;#F7F8FC&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">          }</span><span style="color:#CE9178;">;border-radius: 4px 0 0 4px;&quot;&gt;</span><span style="color:#569CD6;">\${</span><span style="color:#DCDCAA;">formatAmount</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">)</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&lt;/span&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">              &lt;span style=&quot;color: </span><span style="color:#569CD6;">\${</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">                isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;#fff&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#9CDCFE;">branchColor</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">              }</span><span style="color:#CE9178;">;font-family: PingFang SC;font-size: 14px;line-height: 16px;background: </span><span style="color:#569CD6;">\${</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;rgba(255, 255, 255, 0.20)&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;#F7F8FC&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">          }</span><span style="color:#CE9178;">;border-radius: 0 4px 4px 0;&quot;&gt;</span><span style="color:#569CD6;">\${</span><span style="color:#9CDCFE;">unit</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">&lt;/span&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">            &lt;/div&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">            &lt;div style=&quot;display: </span><span style="color:#569CD6;">\${</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              value</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;none&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;block&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">            }</span><span style="color:#CE9178;">;font-family: PingFang SC;font-size: 14px;color: #B7B7B7;&quot;&gt;</span><span style="color:#569CD6;">\${</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            notEmissionControlFlag</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;非控排企业&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;暂未更新&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">          }</span><span style="color:#CE9178;">&lt;/div&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">            \`</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        name:</span><span style="color:#CE9178;"> &#39;value-shape&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      });</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 展开收起</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">children</span><span style="color:#D4D4D4;"> &amp;&amp; </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">children</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">        // 侧边</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;rect&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            x:</span><span style="color:#9CDCFE;"> rectBBox</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">maxX</span><span style="color:#D4D4D4;"> - </span><span style="color:#B5CEA8;">4</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            y:</span><span style="color:#9CDCFE;"> rectBBox</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">minY</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            width:</span><span style="color:#B5CEA8;"> 4</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            height:</span><span style="color:#9CDCFE;"> rectBBox</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">height</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            radius:</span><span style="color:#D4D4D4;"> [</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">rectConfig</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">radius</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">rectConfig</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">radius</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            fill:</span><span style="color:#9CDCFE;"> isRoot</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;transparent&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#9CDCFE;">branchColor</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        });</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;circle&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            x:</span><span style="color:#9CDCFE;"> rectConfig</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">width</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            y:</span><span style="color:#B5CEA8;"> 0</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            r:</span><span style="color:#B5CEA8;"> 11</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            lineWidth:</span><span style="color:#B5CEA8;"> 2</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            stroke:</span><span style="color:#9CDCFE;"> branchColor</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            cursor:</span><span style="color:#CE9178;"> &#39;pointer&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            fill:</span><span style="color:#9CDCFE;"> collapsed</span><span style="color:#D4D4D4;"> ? </span><span style="color:#9CDCFE;">branchColor</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;#fff&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          name:</span><span style="color:#CE9178;"> &#39;collapse-icon&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          modelId:</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        });</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">        // 子节点数量</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;text&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            x:</span><span style="color:#9CDCFE;"> rectConfig</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">width</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            y:</span><span style="color:#9CDCFE;"> collapsed</span><span style="color:#D4D4D4;"> ? </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;"> : -</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            textAlign:</span><span style="color:#CE9178;"> &#39;center&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            textBaseline:</span><span style="color:#CE9178;"> &#39;middle&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            text:</span><span style="color:#9CDCFE;"> collapsed</span><span style="color:#D4D4D4;"> ? </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">children</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;-&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            num:</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">children</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            fontSize:</span><span style="color:#B5CEA8;"> 14</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            cursor:</span><span style="color:#CE9178;"> &#39;pointer&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            fill:</span><span style="color:#9CDCFE;"> collapsed</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;#fff&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#9CDCFE;">branchColor</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          name:</span><span style="color:#CE9178;"> &#39;collapse-text&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          modelId:</span><span style="color:#9CDCFE;"> cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        });</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">        // 连接 展开收起 的线段</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addShape</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;path&#39;</span><span style="color:#D4D4D4;">, {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          attrs:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            path:</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">              [</span><span style="color:#CE9178;">&#39;M&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">rectConfig</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">width</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;"> - </span><span style="color:#B5CEA8;">40</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">              [</span><span style="color:#CE9178;">&#39;L&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">rectConfig</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">width</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;"> - </span><span style="color:#B5CEA8;">10</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            ],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            stroke:</span><span style="color:#9CDCFE;"> branchColor</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            lineWidth:</span><span style="color:#B5CEA8;"> 2</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          name:</span><span style="color:#CE9178;"> &#39;count-link&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      }</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      return</span><span style="color:#9CDCFE;"> rect</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // setState 配置放下面说明</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、自定义边" tabindex="-1"><a class="header-anchor" href="#_3、自定义边"><span>3、自定义边</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerEdge</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;indentedEdge&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    afterDraw</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> sourceNode</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">sourceNode</span><span style="color:#D4D4D4;">?.</span><span style="color:#DCDCAA;">getModel</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> targetNode</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">targetNode</span><span style="color:#D4D4D4;">?.</span><span style="color:#DCDCAA;">getModel</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> color</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">sourceNode</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">branchColor</span><span style="color:#D4D4D4;"> || </span><span style="color:#9CDCFE;">targetNode</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">branchColor</span><span style="color:#D4D4D4;"> || </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">color</span><span style="color:#D4D4D4;"> || </span><span style="color:#CE9178;">&#39;#000&#39;</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> keyShape</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;children&#39;</span><span style="color:#D4D4D4;">)[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">];</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // 修改边的颜色</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      keyShape</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        stroke:</span><span style="color:#9CDCFE;"> color</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        lineWidth:</span><span style="color:#B5CEA8;"> 2</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 修改控制点</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    getControlPoints</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> startPoint</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">startPoint</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> endPoint</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">endPoint</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      return</span><span style="color:#D4D4D4;"> [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          x:</span><span style="color:#9CDCFE;"> startPoint</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> + </span><span style="color:#B5CEA8;">80</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          y:</span><span style="color:#9CDCFE;"> startPoint</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">y</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          x:</span><span style="color:#9CDCFE;"> startPoint</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> + </span><span style="color:#B5CEA8;">80</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          y:</span><span style="color:#9CDCFE;"> endPoint</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">y</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          x:</span><span style="color:#9CDCFE;"> endPoint</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          y:</span><span style="color:#9CDCFE;"> endPoint</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">y</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ];</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    update:</span><span style="color:#569CD6;"> undefined</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;polyline&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、监听点击事件实现展开收起" tabindex="-1"><a class="header-anchor" href="#_4、监听点击事件实现展开收起"><span>4、监听点击事件实现展开收起</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#4FC1FF;">G6</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">registerNode</span><span style="color:#D4D4D4;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;flow-rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // ...其他配置看上面的自定义节点</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 调整节点状态</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    setState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;"> === </span><span style="color:#CE9178;">&#39;collapse&#39;</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">        const</span><span style="color:#4FC1FF;"> group</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getContainer</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">        const</span><span style="color:#4FC1FF;"> collapseText</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">find</span><span style="color:#D4D4D4;">((</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#9CDCFE;"> e</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;name&#39;</span><span style="color:#D4D4D4;">) === </span><span style="color:#CE9178;">&#39;collapse-text&#39;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">        const</span><span style="color:#4FC1FF;"> collapseCircle</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">group</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">find</span><span style="color:#D4D4D4;">((</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#9CDCFE;"> e</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;name&#39;</span><span style="color:#D4D4D4;">) === </span><span style="color:#CE9178;">&#39;collapse-icon&#39;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">        const</span><span style="color:#4FC1FF;"> collapseCircleStyle</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">_cfg</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">originStyle</span><span style="color:#D4D4D4;">[</span><span style="color:#CE9178;">&#39;collapse-icon&#39;</span><span style="color:#D4D4D4;">];</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">        if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">collapseText</span><span style="color:#D4D4D4;"> &amp;&amp; </span><span style="color:#9CDCFE;">collapseCircle</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">          if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            collapseText</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              text:</span><span style="color:#CE9178;"> &#39;-&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              fill:</span><span style="color:#9CDCFE;"> collapseCircleStyle</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">stroke</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            });</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            collapseCircle</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              fill:</span><span style="color:#CE9178;"> &#39;#fff&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          } </span><span style="color:#C586C0;">else</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            collapseText</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              text:</span><span style="color:#9CDCFE;"> collapseText</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">attrs</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">num</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              fill:</span><span style="color:#CE9178;"> &#39;#fff&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            });</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            collapseCircle</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">attr</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              fill:</span><span style="color:#9CDCFE;"> collapseCircleStyle</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">stroke</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            });</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#CE9178;">  &#39;rect&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#DCDCAA;"> handleCollapse</span><span style="color:#D4D4D4;"> = (</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> target</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">target</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> id</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">target</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;modelId&#39;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> item</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">findById</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">id</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  const</span><span style="color:#4FC1FF;"> nodeModel</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getModel</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  nodeModel</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">collapsed</span><span style="color:#D4D4D4;"> = !</span><span style="color:#9CDCFE;">nodeModel</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">collapsed</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">layout</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setItemState</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">item</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;collapse&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">nodeModel</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">collapsed</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">};</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 给展开收起icon和文本绑定事件</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;collapse-text:click&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  handleCollapse</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;collapse-icon:click&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  handleCollapse</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">e</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、数据更新" tabindex="-1"><a class="header-anchor" href="#_5、数据更新"><span>5、数据更新</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#DCDCAA;">useEffect</span><span style="color:#D4D4D4;">(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">       // 数据更新</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">       ref</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">current</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">changeData</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">}, [</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">]);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="踩坑记录" tabindex="-1"><a class="header-anchor" href="#踩坑记录"><span>踩坑记录</span></a></h2><p>1、布局问题：内置的树图布局并不能计算出节点准确的坐标，当节点宽高不统一时，节点可能会重叠在一起。</p><p>目前是通过主动去设定间隔和节点宽高去调整布局，但个人感觉这种方法不是特别的优雅。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#C8C8C8;">layout</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">    type</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&#39;indented&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 布局类型 缩进树</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">    direction</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&#39;LR&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 自左至右布局</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">    dropCap</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 每个节点的第一个自节点是否位于下一行</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">    indent</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">350</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 列间间距</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 动态设置节点高度（文本每12个字换行，增加14px高度）</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">    getHeight</span><span style="color:#D4D4D4;">: (</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">      return</span><span style="color:#B5CEA8;"> 70</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">Math</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">floor</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">cfg</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">?.</span><span style="color:#9CDCFE;">length</span><span style="color:#D4D4D4;"> / </span><span style="color:#B5CEA8;">12</span><span style="color:#D4D4D4;">) * </span><span style="color:#B5CEA8;">14</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、节点在首次展开收起时出现问题：节点要加唯一标识id</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>G6作为一款国产图可视化引擎，可以实现很多d3才能实现的可视化图表，相比较d3来说，它拥有中文官方文档，对于阅读和学习会更加方便。虽然还有些小的问题，场景也不够多远，但是G6提供的布局和交互能力基本可以覆盖常见的业务需求，开箱即用同时又有较好的扩展性。需要快速开发的情况下G6是个不错的选择。</p>`,225),c=[i];function o(r,t){return a(),n("div",null,c)}const D=s(p,[["render",o],["__file","antv G6的基础入门及树图的实际应用.html.vue"]]),v=JSON.parse('{"path":"/antv%20G6%E7%9A%84%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E5%8F%8A%E6%A0%91%E5%9B%BE%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8/antv%20G6%E7%9A%84%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E5%8F%8A%E6%A0%91%E5%9B%BE%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8.html","title":"antv G6的基础入门及树图的实际应用","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"快速上手","slug":"快速上手","link":"#快速上手","children":[{"level":3,"title":"步骤一：创建关系图的 HTML 容器","slug":"步骤一-创建关系图的-html-容器","link":"#步骤一-创建关系图的-html-容器","children":[]},{"level":3,"title":"步骤二：数据准备","slug":"步骤二-数据准备","link":"#步骤二-数据准备","children":[]},{"level":3,"title":"步骤三：创建关系图","slug":"步骤三-创建关系图","link":"#步骤三-创建关系图","children":[]},{"level":3,"title":"步骤四：配置数据源，渲染","slug":"步骤四-配置数据源-渲染","link":"#步骤四-配置数据源-渲染","children":[]},{"level":3,"title":"在react中使用g6","slug":"在react中使用g6","link":"#在react中使用g6","children":[]}]},{"level":2,"title":"图","slug":"图","link":"#图","children":[{"level":3,"title":"初始化/实例化图","slug":"初始化-实例化图","link":"#初始化-实例化图","children":[]},{"level":3,"title":"常用配置项","slug":"常用配置项","link":"#常用配置项","children":[]},{"level":3,"title":"常用函数","slug":"常用函数","link":"#常用函数","children":[]}]},{"level":2,"title":"图元素","slug":"图元素","link":"#图元素","children":[{"level":3,"title":"图形 Shape","slug":"图形-shape","link":"#图形-shape","children":[]},{"level":3,"title":"节点","slug":"节点","link":"#节点","children":[]},{"level":3,"title":"边","slug":"边","link":"#边","children":[]}]},{"level":2,"title":"图布局","slug":"图布局","link":"#图布局","children":[{"level":3,"title":"一般图布局","slug":"一般图布局","link":"#一般图布局","children":[]},{"level":3,"title":"树图布局","slug":"树图布局","link":"#树图布局","children":[]},{"level":3,"title":"布局的切换机制","slug":"布局的切换机制","link":"#布局的切换机制","children":[]}]},{"level":2,"title":"交互与事件","slug":"交互与事件","link":"#交互与事件","children":[{"level":3,"title":"监听事件","slug":"监听事件","link":"#监听事件","children":[]},{"level":3,"title":"交互行为Behavior","slug":"交互行为behavior","link":"#交互行为behavior","children":[]},{"level":3,"title":"状态State","slug":"状态state","link":"#状态state","children":[]}]},{"level":2,"title":"基础动画","slug":"基础动画","link":"#基础动画","children":[{"level":3,"title":"全局动画","slug":"全局动画","link":"#全局动画","children":[]},{"level":3,"title":"元素（边和节点）动画","slug":"元素-边和节点-动画","link":"#元素-边和节点-动画","children":[]}]},{"level":2,"title":"树图实际应用","slug":"树图实际应用","link":"#树图实际应用","children":[{"level":3,"title":"1、初始化图、数据处理","slug":"_1、初始化图、数据处理","link":"#_1、初始化图、数据处理","children":[]},{"level":3,"title":"2、自定义节点","slug":"_2、自定义节点","link":"#_2、自定义节点","children":[]},{"level":3,"title":"3、自定义边","slug":"_3、自定义边","link":"#_3、自定义边","children":[]},{"level":3,"title":"4、监听点击事件实现展开收起","slug":"_4、监听点击事件实现展开收起","link":"#_4、监听点击事件实现展开收起","children":[]},{"level":3,"title":"5、数据更新","slug":"_5、数据更新","link":"#_5、数据更新","children":[]}]},{"level":2,"title":"踩坑记录","slug":"踩坑记录","link":"#踩坑记录","children":[]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"git":{"updatedTime":1725005193000,"contributors":[{"name":"csmSimona","email":"980715844@qq.com","commits":2}]},"filePathRelative":"antv G6的基础入门及树图的实际应用/antv G6的基础入门及树图的实际应用.md","readingTime":{"minutes":27.62,"words":8287}}');export{D as comp,v as data};
