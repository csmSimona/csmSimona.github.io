<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.22" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>前端性能优化 | myDocs</title><meta name="description" content="我的学习笔记文档">
    <link rel="preload" href="/assets/style-B06JCCId.css" as="style"><link rel="stylesheet" href="/assets/style-B06JCCId.css">
    <link rel="modulepreload" href="/assets/app-CHuoViYK.js"><link rel="modulepreload" href="/assets/前端性能优化.html-BqG0OQp4.js">
    <link rel="prefetch" href="/assets/index.html-DyrPc1F1.js" as="script"><link rel="prefetch" href="/assets/JavaScript的优缺点.html-CRPy-MVa.js" as="script"><link rel="prefetch" href="/assets/js异步及处理异步的几种方法.html-bVfXULIZ.js" as="script"><link rel="prefetch" href="/assets/2023年.html-DOLLjwFj.js" as="script"><link rel="prefetch" href="/assets/使用font-spider压缩字体文件.html-lynQvebP.js" as="script"><link rel="prefetch" href="/assets/Git小记.html-BX2Z4lVO.js" as="script"><link rel="prefetch" href="/assets/Linux基本命令.html-fRb5EP5R.js" as="script"><link rel="prefetch" href="/assets/NodeJs小记.html-Cpcqzt6M.js" as="script"><link rel="prefetch" href="/assets/PixiJS实现一镜到底.html-DY2pbkMY.js" as="script"><link rel="prefetch" href="/assets/PixiJS的基本使用.html-B_zWzcHu.js" as="script"><link rel="prefetch" href="/assets/TypeScript小记.html-Bsv4atUc.js" as="script"><link rel="prefetch" href="/assets/Vue.js源码全方位深入解析.html-CKKTPWgl.js" as="script"><link rel="prefetch" href="/assets/正则表达式入门.html-CWaj9RYo.js" as="script"><link rel="prefetch" href="/assets/CSS小记.html-WPwQhmVJ.js" as="script"><link rel="prefetch" href="/assets/HTML小记.html-FoWZO0hD.js" as="script"><link rel="prefetch" href="/assets/JavaScript小记.html-BBhv4hLt.js" as="script"><link rel="prefetch" href="/assets/React小记.html-DM0iLahA.js" as="script"><link rel="prefetch" href="/assets/Typescript面试题.html-D0NtsUz-.js" as="script"><link rel="prefetch" href="/assets/Vue小记.html-QjX-9OhV.js" as="script"><link rel="prefetch" href="/assets/前端工程化.html-CWid4uY-.js" as="script"><link rel="prefetch" href="/assets/前端常见面试题.html-CtFJkG_J.js" as="script"><link rel="prefetch" href="/assets/手写js.html-5foqxWQ7.js" as="script"><link rel="prefetch" href="/assets/计算机网络.html-CBEyHbFt.js" as="script"><link rel="prefetch" href="/assets/Canvas入门.html-CRUIxAJV.js" as="script"><link rel="prefetch" href="/assets/Echarts基本使用.html-Fh9MR70C.js" as="script"><link rel="prefetch" href="/assets/SVG入门.html-B1FpzEUl.js" as="script"><link rel="prefetch" href="/assets/排序.html-DRdBNcWb.js" as="script"><link rel="prefetch" href="/assets/算法题.html-CGUCXf42.js" as="script"><link rel="prefetch" href="/assets/Python编程：从入门到实践.html-h_wXHLYT.js" as="script"><link rel="prefetch" href="/assets/中后台管理系统模板记录.html-BNeUezaB.js" as="script"><link rel="prefetch" href="/assets/低代码数据可视化平台开发记录.html-CJga0xR_.js" as="script"><link rel="prefetch" href="/assets/多页签开发记录.html-BF96R0r1.js" as="script"><link rel="prefetch" href="/assets/Three.js基础课程.html-JPNkSQHu.js" as="script"><link rel="prefetch" href="/assets/antv G6的基础入门及树图的实际应用.html-CE4hlS8C.js" as="script"><link rel="prefetch" href="/assets/CSS揭秘.html-DFLnBUge.js" as="script"><link rel="prefetch" href="/assets/浙政钉、浙里办、浙江政务服务网应用上架指南.html-CECmmfS8.js" as="script"><link rel="prefetch" href="/assets/404.html-CxZLZTLJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">myDocs</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础汇总"><span class="title">前端基础汇总</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础汇总"><span class="title">前端基础汇总</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/JavaScript%E5%B0%8F%E8%AE%B0.html" aria-label="JavaScript小记"><!--[--><!--[--><!--]--><!--]-->JavaScript小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/HTML%E5%B0%8F%E8%AE%B0.html" aria-label="HTML小记"><!--[--><!--[--><!--]--><!--]-->HTML小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/CSS%E5%B0%8F%E8%AE%B0.html" aria-label="CSS小记"><!--[--><!--[--><!--]--><!--]-->CSS小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" aria-label="计算机网络"><!--[--><!--[--><!--]--><!--]-->计算机网络<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/React%E5%B0%8F%E8%AE%B0.html" aria-label="React小记"><!--[--><!--[--><!--]--><!--]-->React小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/Vue%E5%B0%8F%E8%AE%B0.html" aria-label="Vue小记"><!--[--><!--[--><!--]--><!--]-->Vue小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E6%89%8B%E5%86%99js.html" aria-label="手写js"><!--[--><!--[--><!--]--><!--]-->手写js<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96.html" aria-label="前端工程化"><!--[--><!--[--><!--]--><!--]-->前端工程化<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" aria-label="前端性能优化"><!--[--><!--[--><!--]--><!--]-->前端性能优化<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E5%89%8D%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98.html" aria-label="前端常见面试题"><!--[--><!--[--><!--]--><!--]-->前端常见面试题<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/Typescript%E9%9D%A2%E8%AF%95%E9%A2%98.html" aria-label="Typescript面试题"><!--[--><!--[--><!--]--><!--]-->Typescript面试题<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F.html" aria-label="排序"><!--[--><!--[--><!--]--><!--]-->排序<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E9%A2%98.html" aria-label="算法题"><!--[--><!--[--><!--]--><!--]-->算法题<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/Git%E5%B0%8F%E8%AE%B0.html" aria-label="Git小记"><!--[--><!--[--><!--]--><!--]-->Git小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/NodeJs%E5%B0%8F%E8%AE%B0.html" aria-label="NodeJs小记"><!--[--><!--[--><!--]--><!--]-->NodeJs小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/TypeScript%E5%B0%8F%E8%AE%B0.html" aria-label="TypeScript小记"><!--[--><!--[--><!--]--><!--]-->TypeScript小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%A5%E9%97%A8.html" aria-label="正则表达式入门"><!--[--><!--[--><!--]--><!--]-->正则表达式入门<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/Linux%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4.html" aria-label="Linux基本命令"><!--[--><!--[--><!--]--><!--]-->Linux基本命令<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/Vue.js%E6%BA%90%E7%A0%81%E5%85%A8%E6%96%B9%E4%BD%8D%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90.html" aria-label="Vue.js源码全方位深入解析"><!--[--><!--[--><!--]--><!--]-->Vue.js源码全方位深入解析<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/PixiJS%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html" aria-label="PixiJS的基本使用"><!--[--><!--[--><!--]--><!--]-->PixiJS的基本使用<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/PixiJS%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%95%9C%E5%88%B0%E5%BA%95.html" aria-label="PixiJS实现一镜到底"><!--[--><!--[--><!--]--><!--]-->PixiJS实现一镜到底<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="数据可视化"><span class="title">数据可视化</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="数据可视化"><span class="title">数据可视化</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/Canvas%E5%85%A5%E9%97%A8.html" aria-label="Canvas入门"><!--[--><!--[--><!--]--><!--]-->Canvas入门<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/SVG%E5%85%A5%E9%97%A8.html" aria-label="SVG入门"><!--[--><!--[--><!--]--><!--]-->SVG入门<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/Echarts%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html" aria-label="Echarts基本使用"><!--[--><!--[--><!--]--><!--]-->Echarts基本使用<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/antvG6/antv%20G6%E7%9A%84%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E5%8F%8A%E6%A0%91%E5%9B%BE%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8.html" aria-label="antv G6的基础入门及树图的实际应用"><!--[--><!--[--><!--]--><!--]-->antv G6的基础入门及树图的实际应用<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/Three.js/Three.js%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B.html" aria-label="Three.js"><!--[--><!--[--><!--]--><!--]-->Three.js<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="读书笔记"><span class="title">读书笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="读书笔记"><span class="title">读书笔记</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/CSS%E6%8F%AD%E7%A7%98/CSS%E6%8F%AD%E7%A7%98.html" aria-label="《CSS揭秘》"><!--[--><!--[--><!--]--><!--]-->《CSS揭秘》<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Python%E7%BC%96%E7%A8%8B%EF%BC%9A%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5.html" aria-label="《Python编程：从入门到实践》"><!--[--><!--[--><!--]--><!--]-->《Python编程：从入门到实践》<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="项目开发"><span class="title">项目开发</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="项目开发"><span class="title">项目开发</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/%E4%BD%8E%E4%BB%A3%E7%A0%81%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95.html" aria-label="低代码数据可视化平台开发记录"><!--[--><!--[--><!--]--><!--]-->低代码数据可视化平台开发记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/%E4%B8%AD%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%A8%A1%E6%9D%BF%E8%AE%B0%E5%BD%95.html" aria-label="中后台管理系统模板记录"><!--[--><!--[--><!--]--><!--]-->中后台管理系统模板记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/%E5%A4%9A%E9%A1%B5%E7%AD%BE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95.html" aria-label="多页签开发记录"><!--[--><!--[--><!--]--><!--]-->多页签开发记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/项目开发/浙政钉、浙里办、浙江政务服务网应用上架指南.html" aria-label="浙政钉、浙里办、浙江政务服务网应用上架指南"><!--[--><!--[--><!--]--><!--]-->浙政钉、浙里办、浙江政务服务网应用上架指南<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Reading"><span class="title">Reading</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Reading"><span class="title">Reading</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/Reading/2023%E5%B9%B4.html" aria-label="2023年"><!--[--><!--[--><!--]--><!--]-->2023年<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/csmSimona" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础汇总"><span class="title">前端基础汇总</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础汇总"><span class="title">前端基础汇总</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/JavaScript%E5%B0%8F%E8%AE%B0.html" aria-label="JavaScript小记"><!--[--><!--[--><!--]--><!--]-->JavaScript小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/HTML%E5%B0%8F%E8%AE%B0.html" aria-label="HTML小记"><!--[--><!--[--><!--]--><!--]-->HTML小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/CSS%E5%B0%8F%E8%AE%B0.html" aria-label="CSS小记"><!--[--><!--[--><!--]--><!--]-->CSS小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" aria-label="计算机网络"><!--[--><!--[--><!--]--><!--]-->计算机网络<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/React%E5%B0%8F%E8%AE%B0.html" aria-label="React小记"><!--[--><!--[--><!--]--><!--]-->React小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/Vue%E5%B0%8F%E8%AE%B0.html" aria-label="Vue小记"><!--[--><!--[--><!--]--><!--]-->Vue小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E6%89%8B%E5%86%99js.html" aria-label="手写js"><!--[--><!--[--><!--]--><!--]-->手写js<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96.html" aria-label="前端工程化"><!--[--><!--[--><!--]--><!--]-->前端工程化<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" aria-label="前端性能优化"><!--[--><!--[--><!--]--><!--]-->前端性能优化<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E5%89%8D%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98.html" aria-label="前端常见面试题"><!--[--><!--[--><!--]--><!--]-->前端常见面试题<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/Typescript%E9%9D%A2%E8%AF%95%E9%A2%98.html" aria-label="Typescript面试题"><!--[--><!--[--><!--]--><!--]-->Typescript面试题<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F.html" aria-label="排序"><!--[--><!--[--><!--]--><!--]-->排序<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E9%A2%98.html" aria-label="算法题"><!--[--><!--[--><!--]--><!--]-->算法题<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/Git%E5%B0%8F%E8%AE%B0.html" aria-label="Git小记"><!--[--><!--[--><!--]--><!--]-->Git小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/NodeJs%E5%B0%8F%E8%AE%B0.html" aria-label="NodeJs小记"><!--[--><!--[--><!--]--><!--]-->NodeJs小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/TypeScript%E5%B0%8F%E8%AE%B0.html" aria-label="TypeScript小记"><!--[--><!--[--><!--]--><!--]-->TypeScript小记<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%A5%E9%97%A8.html" aria-label="正则表达式入门"><!--[--><!--[--><!--]--><!--]-->正则表达式入门<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/Linux%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4.html" aria-label="Linux基本命令"><!--[--><!--[--><!--]--><!--]-->Linux基本命令<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/Vue.js%E6%BA%90%E7%A0%81%E5%85%A8%E6%96%B9%E4%BD%8D%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90.html" aria-label="Vue.js源码全方位深入解析"><!--[--><!--[--><!--]--><!--]-->Vue.js源码全方位深入解析<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/PixiJS%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html" aria-label="PixiJS的基本使用"><!--[--><!--[--><!--]--><!--]-->PixiJS的基本使用<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96/PixiJS%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%95%9C%E5%88%B0%E5%BA%95.html" aria-label="PixiJS实现一镜到底"><!--[--><!--[--><!--]--><!--]-->PixiJS实现一镜到底<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="数据可视化"><span class="title">数据可视化</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="数据可视化"><span class="title">数据可视化</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/Canvas%E5%85%A5%E9%97%A8.html" aria-label="Canvas入门"><!--[--><!--[--><!--]--><!--]-->Canvas入门<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/SVG%E5%85%A5%E9%97%A8.html" aria-label="SVG入门"><!--[--><!--[--><!--]--><!--]-->SVG入门<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/Echarts%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html" aria-label="Echarts基本使用"><!--[--><!--[--><!--]--><!--]-->Echarts基本使用<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/antvG6/antv%20G6%E7%9A%84%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E5%8F%8A%E6%A0%91%E5%9B%BE%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8.html" aria-label="antv G6的基础入门及树图的实际应用"><!--[--><!--[--><!--]--><!--]-->antv G6的基础入门及树图的实际应用<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/Three.js/Three.js%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B.html" aria-label="Three.js"><!--[--><!--[--><!--]--><!--]-->Three.js<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="读书笔记"><span class="title">读书笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="读书笔记"><span class="title">读书笔记</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/CSS%E6%8F%AD%E7%A7%98/CSS%E6%8F%AD%E7%A7%98.html" aria-label="《CSS揭秘》"><!--[--><!--[--><!--]--><!--]-->《CSS揭秘》<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Python%E7%BC%96%E7%A8%8B%EF%BC%9A%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5.html" aria-label="《Python编程：从入门到实践》"><!--[--><!--[--><!--]--><!--]-->《Python编程：从入门到实践》<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="项目开发"><span class="title">项目开发</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="项目开发"><span class="title">项目开发</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/%E4%BD%8E%E4%BB%A3%E7%A0%81%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95.html" aria-label="低代码数据可视化平台开发记录"><!--[--><!--[--><!--]--><!--]-->低代码数据可视化平台开发记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/%E4%B8%AD%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%A8%A1%E6%9D%BF%E8%AE%B0%E5%BD%95.html" aria-label="中后台管理系统模板记录"><!--[--><!--[--><!--]--><!--]-->中后台管理系统模板记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/%E5%A4%9A%E9%A1%B5%E7%AD%BE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95.html" aria-label="多页签开发记录"><!--[--><!--[--><!--]--><!--]-->多页签开发记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/项目开发/浙政钉、浙里办、浙江政务服务网应用上架指南.html" aria-label="浙政钉、浙里办、浙江政务服务网应用上架指南"><!--[--><!--[--><!--]--><!--]-->浙政钉、浙里办、浙江政务服务网应用上架指南<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Reading"><span class="title">Reading</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Reading"><span class="title">Reading</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/Reading/2023%E5%B9%B4.html" aria-label="2023年"><!--[--><!--[--><!--]--><!--]-->2023年<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/csmSimona" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">前端性能优化 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="前端性能优化" tabindex="-1"><a class="header-anchor" href="#前端性能优化"><span>前端性能优化</span></a></h1><h2 id="常规性能优化" tabindex="-1"><a class="header-anchor" href="#常规性能优化"><span>常规性能优化</span></a></h2><h3 id="一、利用缓存减少远程请求" tabindex="-1"><a class="header-anchor" href="#一、利用缓存减少远程请求"><span>一、利用缓存减少远程请求</span></a></h3><h4 id="_1、浏览器缓存" tabindex="-1"><a class="header-anchor" href="#_1、浏览器缓存"><span><strong>1、浏览器缓存</strong></span></a></h4><p>设置合适的缓存策略，如使用<code>Cache-Control</code>头设置资源缓存时间</p><p>具体可看：<a href="https://csmsimona.github.io/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html#_11%E3%80%81%E5%BC%BA%E7%BC%93%E5%AD%98%E5%92%8C%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98" target="_blank" rel="noopener noreferrer">强缓存和协商缓存</a></p><h4 id="_2、service-worker" tabindex="-1"><a class="header-anchor" href="#_2、service-worker"><span>2、<strong>Service Worker</strong></span></a></h4><p>使用 Service Worker 来缓存静态资源，实现离线访问</p><h3 id="二、减少http请求" tabindex="-1"><a class="header-anchor" href="#二、减少http请求"><span>二、减少HTTP请求</span></a></h3><h4 id="_1、合并文件" tabindex="-1"><a class="header-anchor" href="#_1、合并文件"><span><strong>1、合并文件</strong></span></a></h4><p>将多个CSS或JS文件合并为一个文件，减少HTTP请求次数。</p><h4 id="_2、使用精灵图-sprite" tabindex="-1"><a class="header-anchor" href="#_2、使用精灵图-sprite"><span><strong>2、使用精灵图（Sprite）</strong></span></a></h4><p>将多个小图标合并成一个图片，使用CSS背景定位来显示不同部分。</p><p>精灵图的核心原理在于设置不同的背景偏移量，大致包含两点：</p><ul><li>不同的图标元素都会将 <code>background-url</code> 设置为合并后的精灵图的 uri；</li><li>不同的图标通过设置对应的 <code>background-position</code> 来展示大图中对应的图标部分。</li></ul><h4 id="_3、高频率请求场景使用节流和防抖" tabindex="-1"><a class="header-anchor" href="#_3、高频率请求场景使用节流和防抖"><span>3、高频率请求场景使用节流和防抖</span></a></h4><p><a href="https://csmsimona.github.io/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/JavaScript%E5%B0%8F%E8%AE%B0.html#_7%E3%80%81%E8%8A%82%E6%B5%81%E5%92%8C%E9%98%B2%E6%8A%96" target="_blank" rel="noopener noreferrer">节流（Throttle）和防抖（Debounce）</a></p><p><strong>节流是指在一段时间内，不管事件触发了多少次，只执行一次回调。</strong></p><p><strong>防抖是指在事件被触发后延迟一段时间后再执行回调，如果在这段延迟时间内事件又被触发，则重新计算延迟时间。</strong></p><p><strong>节流是将多次执行变成每隔一段时间执行，防抖是将多次执行变为最后一次执行。</strong></p><p>例：实时搜索框频繁输入内容使用防抖、搜索联想使用节流</p><h3 id="三、加快请求速度" tabindex="-1"><a class="header-anchor" href="#三、加快请求速度"><span>三、加快请求速度</span></a></h3><h4 id="_1、避免多余重定向" tabindex="-1"><a class="header-anchor" href="#_1、避免多余重定向"><span><strong>1、避免多余重定向</strong></span></a></h4><h4 id="_2、dns预解析" tabindex="-1"><a class="header-anchor" href="#_2、dns预解析"><span><strong>2、DNS预解析</strong></span></a></h4><div class="language-html line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-html;"><code><span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">link</span><span style="color:#9CDCFE;"> rel</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;dns-prefetch&quot;</span><span style="color:#9CDCFE;"> href</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://yourwebsite.com&quot;</span><span style="color:#808080;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3、预先建立连接" tabindex="-1"><a class="header-anchor" href="#_3、预先建立连接"><span><strong>3、预先建立连接</strong></span></a></h4><div class="language-html line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-html;"><code><span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">link</span><span style="color:#9CDCFE;"> rel</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;preconnect&quot;</span><span style="color:#9CDCFE;"> href</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;http://yourwebsite.com&quot;</span><span style="color:#808080;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_4、静态资源使用cdn" tabindex="-1"><a class="header-anchor" href="#_4、静态资源使用cdn"><span><strong>4、静态资源使用CDN</strong></span></a></h4><p>内容分发网络（CDN）是一组分布在多个不同地理位置的 Web 服务器。</p><p>对于使用 CDN 的资源，DNS 解析会将 CDN 资源的域名解析到 CDN 服务的负载均衡器上，负载均衡器可以通过请求的信息获取用户对应的地理区域，从而<strong>通过负载均衡算法，在背后的诸多服务器中，综合选择一台地理位置近、负载低的机器来提供服务</strong>。例如为北京联通用户解析北京的服务器 IP。这样，用户在之后访问 CDN 资源时都是访问北京服务器，距离近，速度快。</p><h4 id="_5、使用服务端渲染-ssr" tabindex="-1"><a class="header-anchor" href="#_5、使用服务端渲染-ssr"><span><strong>5、使用服务端渲染（SSR）</strong></span></a></h4><p><a href="https://csmsimona.github.io/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E5%89%8D%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98.html#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93" target="_blank" rel="noopener noreferrer">什么是服务端渲染</a></p><h3 id="四、加速页面解析与处理" tabindex="-1"><a class="header-anchor" href="#四、加速页面解析与处理"><span>四、加速页面解析与处理</span></a></h3><h4 id="_1、注意资源在页面文档中的位置" tabindex="-1"><a class="header-anchor" href="#_1、注意资源在页面文档中的位置"><span><strong>1、注意资源在页面文档中的位置</strong></span></a></h4><p>浏览器在加载HTML内容时，是将HTML内容从上至下依次解析，解析到link或者script标签就会加载href或者src对应链接内容，为了第一时间展示页面给用户，就需要将CSS提前加载，不要受 JS 加载影响。</p><p>一般情况下都是CSS在头部，JS在底部。</p><h4 id="_2、使用-defer-和-async异步加载js" tabindex="-1"><a class="header-anchor" href="#_2、使用-defer-和-async异步加载js"><span><strong>2、使用 defer 和 async异步加载JS</strong></span></a></h4><p>防止 JavaScript 脚本的下载阻塞 DOM 构建</p><ul><li><code>defer</code> 会在 HTML 解析完成后，按照脚本出现的次序再顺序执行</li><li><code>async</code> 则是下载完成就立即开始执行，同时阻塞页面解析，不保证脚本间的执行顺序。</li><li>推荐在一些与主业务无关的 JavaScript 脚本上使用 async。例如统计脚本、监控脚本、广告脚本等。</li></ul><h4 id="_3、懒加载-lazy-load" tabindex="-1"><a class="header-anchor" href="#_3、懒加载-lazy-load"><span><strong>3、懒加载（Lazy Load）</strong></span></a></h4><p><a href="https://csmsimona.github.io/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/HTML%E5%B0%8F%E8%AE%B0.html#_22%E3%80%81%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD%E5%92%8C%E9%A2%84%E5%8A%A0%E8%BD%BD" target="_blank" rel="noopener noreferrer">图片懒加载与预加载</a></p><p>通过监听页面滚动，判断图片是否进入视野，从而真正去加载图片</p><p>对于页面上的元素只需要将原本的 <code>src</code> 值设置到 <code>data-src</code> 中即可，而 <code>src</code> 可以设置为一个统一的占位图。</p><p>如果想使用懒加载，还可以借助一些已有的工具库，例如 <a href="https://github.com/aFarkas/lazysizes" target="_blank" rel="noopener noreferrer">aFarkas/lazysizes</a>、<a href="https://github.com/verlok/lazyload" target="_blank" rel="noopener noreferrer">verlok/lazyload</a>、<a href="https://github.com/tuupola/lazyload" target="_blank" rel="noopener noreferrer">tuupola/lazyload</a> 等。</p><h4 id="_4、预加载与预获取" tabindex="-1"><a class="header-anchor" href="#_4、预加载与预获取"><span><strong>4、预加载与预获取</strong></span></a></h4><p>使用<code>&lt;link rel=&quot;preload&quot;&gt;</code>和<code>&lt;link rel=&quot;prefetch&quot;&gt;</code>来提前加载或获取关键资源。</p><h3 id="五、提高渲染性能" tabindex="-1"><a class="header-anchor" href="#五、提高渲染性能"><span>五、提高渲染性能</span></a></h3><h4 id="_1、减少重排重绘" tabindex="-1"><a class="header-anchor" href="#_1、减少重排重绘"><span><strong>1、减少重排重绘</strong></span></a></h4><p><a href="https://csmsimona.github.io/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/HTML%E5%B0%8F%E8%AE%B0.html#_14%E3%80%81%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%BF%87%E7%A8%8B" target="_blank" rel="noopener noreferrer">浏览器渲染过程</a></p><p><a href="https://csmsimona.github.io/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/HTML%E5%B0%8F%E8%AE%B0.html#_19%E3%80%81%E9%87%8D%E7%BB%98-repaint-%E5%92%8C%E9%87%8D%E6%8E%92-reflow" target="_blank" rel="noopener noreferrer">重排和重绘</a></p><h5 id="减少dom操作" tabindex="-1"><a class="header-anchor" href="#减少dom操作"><span>减少DOM操作</span></a></h5><ul><li><strong>避免频繁的DOM查询</strong>：对于需要频繁访问的DOM元素，将其查询结果缓存起来，避免多次调用<code>document.querySelector</code>或<code>getElementById</code>等方法。</li><li><strong>批量操作DOM</strong><ul><li><strong>使用文档片段（DocumentFragment）</strong>：在操作多个DOM节点时，先将它们添加到<code>DocumentFragment</code>中，最后一次性插入DOM。</li><li><strong>离线操作DOM</strong>：将元素从DOM树中移除<code>（display:none等脱离文档流方式）</code>，完成操作后再插入。比如操作表格时可以先将表格移出文档流，更新后再插回去。</li></ul></li><li><strong>使用虚拟DOM</strong>：如果使用React、Vue等框架，这些框架的虚拟DOM机制可以大幅减少实际的DOM操作。虚拟DOM通过对比新旧DOM树的差异来最小化实际的DOM操作次数。</li><li>**合并DOM更新：**在动画或大量DOM更新时，将操作放入<code>requestAnimationFrame</code>回调中，以确保它们在同一帧内进行，避免多次重排</li><li>使用<code>resize</code>事件时，做<strong>防抖</strong>和<strong>节流</strong>处理</li></ul><h5 id="css优化" tabindex="-1"><a class="header-anchor" href="#css优化"><span>CSS优化</span></a></h5><ul><li><strong>查找元素的优化</strong>：应该尽可能的通过ID或者类来查找元素，避免通过属性来查找元素。</li><li><strong>避免使用CSS表达式</strong>：CSS表达式会导致每次重排时都重新计算，增加重排次数。通过<strong>更改 className 批量修改元素样式</strong></li><li><strong>避免使用</strong><code>width: auto</code>：使用明确的宽度值可以减少浏览器计算和重排的频率。</li><li>尽量少使用<code>dispaly:none</code>，可以使用<code>visibility:hidden</code>代替，<code>dispaly:none</code>会造成<strong>重排</strong>，<code>visibility:hidden</code>会造成<strong>重绘</strong>。</li><li>尽量<strong>减少深度嵌套或复杂选择器的使用</strong>，以提高 CSS 渲染效率。</li><li><strong>避免使用表格布局</strong>：因为在表格元素上触发回流会导致其中所有其他元素的回流</li></ul><h5 id="动画相关优化" tabindex="-1"><a class="header-anchor" href="#动画相关优化"><span>动画相关优化</span></a></h5><ul><li>将<strong>复杂的动画元素定位为 fixed 或 absolute</strong> 减少重排</li><li><strong>使用will-change属性</strong>：对于可能频繁改变的元素，可以设置<code>will-change</code>属性来提示浏览器提前进行优化。（但避免过度使用 will-change；在动画中遇到性能问题时考虑使用它）</li><li>在 GPU 上渲染动画：浏览器已经优化了 CSS 动画，使其适用于触发动画属性的重绘（因此也包括回流）。为了提高性能，<strong>将具有动画效果的元素移动到 GPU 上</strong>。**可以触发 GPU 硬件加速的 CSS 属性包括 transform、filter、will-change 和 position:fixed。**动画将在 GPU 上处理，提高性能，特别是在移动设备上（但避免过度使用，因为可能会导致性能问题）。</li></ul><h4 id="_2、使用css动画" tabindex="-1"><a class="header-anchor" href="#_2、使用css动画"><span><strong>2、使用CSS动画</strong></span></a></h4><p>尽量使用CSS动画代替JavaScript动画，因为CSS动画通常在性能上更优。</p><h3 id="六、图片资源优化" tabindex="-1"><a class="header-anchor" href="#六、图片资源优化"><span>六、图片资源优化</span></a></h3><h4 id="_1、使用精灵图-sprite" tabindex="-1"><a class="header-anchor" href="#_1、使用精灵图-sprite"><span><strong>1、使用精灵图（Sprite）</strong></span></a></h4><h4 id="_2、使用合适的图片格式" tabindex="-1"><a class="header-anchor" href="#_2、使用合适的图片格式"><span><strong>2、使用合适的图片格式</strong></span></a></h4><ul><li><p>对于能够显示WebP格式的浏览器尽量使用WebP格式。因为WebP格式具有更好的图象数据压缩算法，能带来更小的图片体积，而且拥有肉眼识别无差异的图象质量，缺点就是兼容性并不好</p></li><li><p>小图使用PNG</p></li><li><p>照片使用JPEG</p></li><li><p>使用 SVG 应对矢量图场景</p><p>在一些需要缩放与高保真的情况，或者用作图标的场景下，使用 SVG 这种矢量图非常不错。有时使用 SVG 格式会比相同的 PNG 或 JPEG 更小。</p></li></ul><h4 id="_3、图片压缩" tabindex="-1"><a class="header-anchor" href="#_3、图片压缩"><span><strong>3、图片压缩</strong></span></a></h4><p>使用压缩工具减少图像文件的大小</p><p><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer">tinypng（熊猫压缩）</a></p><p><a href="https://imagecompressor.com/zh/" target="_blank" rel="noopener noreferrer">在线图像优化器</a></p><p><a href="https://www.bejson.com/ui/compress_img/" target="_blank" rel="noopener noreferrer">图片压缩工具</a></p><h4 id="_4、使用cdn" tabindex="-1"><a class="header-anchor" href="#_4、使用cdn"><span><strong>4、使用CDN</strong></span></a></h4><h4 id="_5、图标用iconfont代替" tabindex="-1"><a class="header-anchor" href="#_5、图标用iconfont代替"><span><strong>5、图标用Iconfont代替</strong></span></a></h4><h4 id="_6、尽可能利用-css3效果代替图片" tabindex="-1"><a class="header-anchor" href="#_6、尽可能利用-css3效果代替图片"><span><strong>6、尽可能利用 CSS3效果代替图片</strong></span></a></h4><p>有很多图片使用 CSS 效果（渐变、阴影等）就能画出来，这种情况选择 CSS3 效果更好。因为代码大小通常是图片大小的几分之一甚至几十分之一。</p><h3 id="七、字体文件优化" tabindex="-1"><a class="header-anchor" href="#七、字体文件优化"><span>七、字体文件优化</span></a></h3><h4 id="_1、字体裁剪" tabindex="-1"><a class="header-anchor" href="#_1、字体裁剪"><span><strong>1、字体裁剪</strong></span></a></h4><p>一个字体库中可能会包含很多字（尤其是在中文的场景下），但是并非每个字都会使用到，因此可以将不需要使用到的字体剔除</p><p><strong>font-spider（字蛛）减少ttf字体文件大小</strong></p><p><a class="route-link" href="/%E4%BD%BF%E7%94%A8font-spider%E5%8E%8B%E7%BC%A9%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6/%E4%BD%BF%E7%94%A8font-spider%E5%8E%8B%E7%BC%A9%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6.html">使用font-spider压缩字体文件</a></p><h4 id="_2、font-display" tabindex="-1"><a class="header-anchor" href="#_2、font-display"><span><strong>2、font-display</strong></span></a></h4><p>在 <code>@font-face</code> 中设置 <code>font-display: swap</code>，让 FOIT 的默认行为变为 FOUT (Flash of Unstyled Text)，即先会使用默认字体样式展示文本，字体加载完毕后再将文本的字体样式进行替换。</p><div class="language-CSS line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="CSS"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-CSS;"><code><span class="line"><span class="line"><span style="color:#C586C0;">@font-face</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  font-family</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;Orbitron&quot;</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  src</span><span style="color:#D4D4D4;">: </span><span style="color:#DCDCAA;">url</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;./Orbitron-VariableFont_wght.ttf&quot;</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  font-display</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">swap</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://caniuse.com/css-font-rendering-controls" target="_blank" rel="noopener noreferrer">font-display兼容性</a></p><h4 id="_3、开启cdn" tabindex="-1"><a class="header-anchor" href="#_3、开启cdn"><span><strong>3、开启CDN</strong></span></a></h4><h4 id="_4、开启gzip压缩" tabindex="-1"><a class="header-anchor" href="#_4、开启gzip压缩"><span><strong>4、开启gzip压缩</strong></span></a></h4><h4 id="_5、fontmin-webpack" tabindex="-1"><a class="header-anchor" href="#_5、fontmin-webpack"><span><strong>5、fontmin-webpack</strong></span></a></h4><p>webpack插件，将图标字体缩小为仅使用的字形</p><h3 id="八、减少第三方依赖" tabindex="-1"><a class="header-anchor" href="#八、减少第三方依赖"><span><strong>八、减少第三方依赖</strong></span></a></h3><ul><li><p><strong>按需引入</strong>：使用 lodash、moment 等库时，可以使用类似<code>lodash-es</code>、<code>date-fns</code>等按需引入的版本，避免加载整个库。</p></li><li><p><strong>轻量替代方案</strong>：寻找更轻量的库或原生API代替大型库，例如使用<code>fetch</code>替代<code>axios</code>。</p></li><li><p><strong>剔除掉无用的语言包</strong>：例如项目中使用了 momentjs，发现打包后有很多没有用到的语言包</p><p>使用 <code>moment-locales-webpack-plugin</code> 插件，剔除掉无用的语言包</p></li></ul><h3 id="九、构建优化" tabindex="-1"><a class="header-anchor" href="#九、构建优化"><span>九、构建优化</span></a></h3><p><a href="https://csmsimona.github.io/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96.html#%E4%BC%98%E5%8C%96" target="_blank" rel="noopener noreferrer">前端工程化-Webpack优化</a></p><h4 id="_1、代码压缩" tabindex="-1"><a class="header-anchor" href="#_1、代码压缩"><span><strong>1、代码压缩</strong></span></a></h4><ul><li><p>在 webpack 可以使用如下插件进行压缩：</p><ul><li>JavaScript：UglifyJsPlugin、TerserPlugin</li><li>CSS ：MiniCssExtractPlugin、CssMinimizerWebpackPlugin</li><li>HTML：HtmlWebpackPlugin</li></ul></li><li><p>使用 gzip 压缩</p><p>html、js、css资源，使用 gzip 后通常可以将体积压缩70%以上</p><p>使用 webpack 进行 gzip 压缩的方式，使用 <code>compression-webpack-plugin</code> 插件</p></li><li><p>使用Brotli压缩</p></li></ul><h4 id="_2、使用-url-loader-将图片转-base64" tabindex="-1"><a class="header-anchor" href="#_2、使用-url-loader-将图片转-base64"><span>2、使用 <code>url-loader</code> 将图片转 base64</span></a></h4><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// 安装</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">npm</span><span style="color:#9CDCFE;"> install</span><span style="color:#9CDCFE;"> url</span><span style="color:#D4D4D4;">-</span><span style="color:#9CDCFE;">loader</span><span style="color:#D4D4D4;"> --</span><span style="color:#9CDCFE;">save</span><span style="color:#D4D4D4;">-</span><span style="color:#9CDCFE;">dev</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    </span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 配置</span></span></span>
<span class="line"><span class="line"><span style="color:#4EC9B0;">module</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">exports</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  module:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    rules:</span><span style="color:#D4D4D4;"> [{</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        test:</span><span style="color:#D16969;"> /.</span><span style="color:#CE9178;">(</span><span style="color:#D16969;">png</span><span style="color:#DCDCAA;">|</span><span style="color:#D16969;">jpg</span><span style="color:#DCDCAA;">|</span><span style="color:#D16969;">gif</span><span style="color:#CE9178;">)</span><span style="color:#DCDCAA;">$</span><span style="color:#D16969;">/</span><span style="color:#569CD6;">i</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        use:</span><span style="color:#D4D4D4;"> [{</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            loader:</span><span style="color:#CE9178;"> &#39;url-loader&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            options:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">              // 小于 10kb 的图片转化为 base64</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              limit:</span><span style="color:#B5CEA8;"> 1024</span><span style="color:#D4D4D4;"> * </span><span style="color:#B5CEA8;">10</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        }]</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">     }]</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">};</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3、使用image-webpack-loader插件进行图片压缩" tabindex="-1"><a class="header-anchor" href="#_3、使用image-webpack-loader插件进行图片压缩"><span>3、使用<code>image-webpack-loader</code>插件进行图片压缩</span></a></h4><h4 id="_4、使用tree-shaking-移除未使用的代码" tabindex="-1"><a class="header-anchor" href="#_4、使用tree-shaking-移除未使用的代码"><span><strong>4、使用Tree Shaking 移除未使用的代码</strong></span></a></h4><p>Webpack 支持 Tree Shaking，通过 <code>mode: &#39;production&#39;</code> 或配置 <code>optimization.usedExports: true</code>，自动删除未使用的代码，减少打包体积。</p><h4 id="_5、给打包出来的文件名添加哈希-实现浏览器缓存文件" tabindex="-1"><a class="header-anchor" href="#_5、给打包出来的文件名添加哈希-实现浏览器缓存文件"><span><strong>5、给打包出来的文件名添加哈希，实现浏览器缓存文件</strong></span></a></h4><p>通过 Webpack 的 <code>[contenthash]</code> 配置为输出文件名生成唯一的哈希值，确保文件内容变化时，浏览器能够重新获取新文件。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#C8C8C8;">output</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">  filename</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&#39;[name].[contenthash].js&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">  path</span><span style="color:#D4D4D4;">: </span><span style="color:#9CDCFE;">path</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">resolve</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">__dirname</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;dist&#39;</span><span style="color:#D4D4D4;">),</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6、持久化缓存-cache" tabindex="-1"><a class="header-anchor" href="#_6、持久化缓存-cache"><span>6、持久化缓存（cache）</span></a></h4><p>Webpack 5 引入了持久化缓存机制，通过 <code>cache: { type: &#39;filesystem&#39; }</code> 来缓存生成的模块和编译信息，提升二次构建速度。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#C8C8C8;">cache</span><span style="color:#D4D4D4;">: {</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">  type</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&#39;filesystem&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7、ignoreplugin-避免引用无用模块-直接不引入-代码中没有" tabindex="-1"><a class="header-anchor" href="#_7、ignoreplugin-避免引用无用模块-直接不引入-代码中没有"><span>7、IgnorePlugin 避免引用无用模块（直接不引入，代码中没有）</span></a></h4><p>以moment.js为例，忽略语言包</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// 忽略 moment 下的 /locale 目录</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">new</span><span style="color:#9CDCFE;"> webpack</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">IgnorePlugin</span><span style="color:#D4D4D4;">(</span><span style="color:#D16969;">/</span><span style="color:#D7BA7D;">\.\/</span><span style="color:#D16969;">locale/</span><span style="color:#D4D4D4;">,</span><span style="color:#D16969;"> /moment/</span><span style="color:#D4D4D4;">),</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8、使用splitchunks拆包-提取公共代码" tabindex="-1"><a class="header-anchor" href="#_8、使用splitchunks拆包-提取公共代码"><span><strong>8、使用splitChunks拆包，提取公共代码</strong></span></a></h4><p><strong>将基础库代码单独拆包打包合并</strong></p><p>为了更好利用缓存，我们一般会把不容易变化的部分单独抽取出来。例如一个 React 技术栈的项目，可能会将 React、Redux、React-Router 这类基础库单独打包出一个文件。</p><p>这样做的优点在于，由于基础库被单独打包在一起了，即使业务代码经常变动，也不会导致整个缓存失效。基础框架/库、项目中的 common、util 仍然可以利用缓存，不会每次发布新版都会让用户花费不必要的带宽重新下载基础库。</p><p>可以通过 optimization.splitChunks来分离一些公共库。</p><div class="language-JavaScript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-JavaScript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// webpack.config.js</span></span></span>
<span class="line"><span class="line"><span style="color:#4EC9B0;">module</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">exports</span><span style="color:#D4D4D4;"> = {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    //...</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    optimization:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        splitChunks:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            chunks:</span><span style="color:#CE9178;"> &#39;all&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            minChunks:</span><span style="color:#B5CEA8;"> 1</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            cacheGroups:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">                commons:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">                    minChunks:</span><span style="color:#B5CEA8;"> 1</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">                    automaticNamePrefix:</span><span style="color:#CE9178;"> &#39;commons&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">                    test:</span><span style="color:#D16969;"> /</span><span style="color:#CE9178;">[</span><span style="color:#D7BA7D;">\\</span><span style="color:#D16969;">/</span><span style="color:#CE9178;">]</span><span style="color:#D16969;">node_modules</span><span style="color:#CE9178;">[</span><span style="color:#D7BA7D;">\\</span><span style="color:#D16969;">/</span><span style="color:#CE9178;">]</span><span style="color:#D16969;">react</span><span style="color:#DCDCAA;">|</span><span style="color:#D16969;">redux</span><span style="color:#DCDCAA;">|</span><span style="color:#D16969;">react-redux/</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">                    chunks:</span><span style="color:#CE9178;"> &#39;all&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">                }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9、使用cdn加速" tabindex="-1"><a class="header-anchor" href="#_9、使用cdn加速"><span>9、使用CDN加速</span></a></h4><p>1、publicPath配置cdn网址 <code>publicPath: &#39;http://cdn.abc.com&#39; // 修改所有静态文件 url 的前缀（如 cdn 域名）</code></p><p>2、将打包资源CSS、JS等上传到cdn</p><h3 id="十、监控与分析" tabindex="-1"><a class="header-anchor" href="#十、监控与分析"><span>十、监控与分析</span></a></h3><h4 id="_1、webpack-bundle-analyzer" tabindex="-1"><a class="header-anchor" href="#_1、webpack-bundle-analyzer"><span><strong>1、</strong><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer"><strong>webpack-bundle-analyzer</strong></a></span></a></h4><p>可以通过 <a href="https://github.com/webpack-contrib/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer">webpack-bundle-analyzer</a> 这个工具来查看打包代码里面各个模块的占用大小</p><div class="language-Bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="Bash"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-Bash;"><code><span class="line"><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> install</span><span style="color:#CE9178;"> webpack-bundle-analyzer</span><span style="color:#569CD6;"> -D</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">//</span><span style="color:#CE9178;"> vue.config.js</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">module.exports</span><span style="color:#CE9178;"> =</span><span style="color:#CE9178;"> {</span><span style="color:#D4D4D4;">     </span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">   chainWebpack:</span><span style="color:#D4D4D4;"> (config) =&gt; {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">        //</span><span style="color:#CE9178;"> 分析打包大小</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">        if</span><span style="color:#D4D4D4;"> (</span><span style="color:#DCDCAA;">process.env.npm_config_report</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">          config.plugin(</span><span style="color:#DCDCAA;">&#39;webpack-bundle-analyzer&#39;</span><span style="color:#D4D4D4;">)</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">            .use(require(</span><span style="color:#DCDCAA;">&#39;webpack-bundle-analyzer&#39;</span><span style="color:#D4D4D4;">).BundleAnalyzerPlugin)</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">            .end</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">   }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">}</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">//</span><span style="color:#CE9178;"> package.json</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">{</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  &quot;name&quot;</span><span style="color:#DCDCAA;">:</span><span style="color:#CE9178;"> &quot;name&quot;,</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  &quot;version&quot;</span><span style="color:#DCDCAA;">:</span><span style="color:#CE9178;"> &quot;0.0.1&quot;,</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  &quot;scripts&quot;</span><span style="color:#DCDCAA;">:</span><span style="color:#CE9178;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">    &quot;report&quot;</span><span style="color:#DCDCAA;">:</span><span style="color:#CE9178;"> &quot;set npm_config_report=true &amp;&amp; vue-cli-service build&quot;,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">  ...</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;"> }</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> run</span><span style="color:#CE9178;"> report</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、使用性能检测工具" tabindex="-1"><a class="header-anchor" href="#_2、使用性能检测工具"><span><strong>2、使用性能检测工具</strong></span></a></h4><p>使用<a href="#%E6%80%A7%E8%83%BD%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7lighthouse">Lighthouse</a>、PageSpeed Insights等工具分析和优化页面性能。</p><h4 id="_3、检查加载性能" tabindex="-1"><a class="header-anchor" href="#_3、检查加载性能"><span>3、检查加载性能</span></a></h4><p>一个网站加载性能如何主要看白屏时间和首屏时间。</p><ul><li>白屏时间：指从输入网址，到页面开始显示内容的时间。</li><li>首屏时间：指从输入网址，到页面完全渲染的时间。</li></ul><p>将以下脚本放在 <code>&lt;/head&gt;</code> 前面就能<strong>获取白屏时间</strong>。</p><div class="language-HTML line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="HTML"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-HTML;"><code><span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">script</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">  new</span><span style="color:#DCDCAA;"> Date</span><span style="color:#D4D4D4;">() - </span><span style="color:#9CDCFE;">performance</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">timing</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">navigationStart</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  </span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  // 通过 firstPaint（第一次绘制的时间点） 和 navigationStart 也可以</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">  performance</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">timing</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">firstPaint</span><span style="color:#D4D4D4;"> - </span><span style="color:#9CDCFE;">performance</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">timing</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">navigationStart</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">script</span><span style="color:#808080;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>计算首屏时间</strong></p><div class="language-JavaScript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-JavaScript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">// 方法一</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">window</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addEventListener</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;load&#39;</span><span style="color:#D4D4D4;">, () </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    let</span><span style="color:#9CDCFE;"> timing</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">performance</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">timing</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // domContentLoadedEventEnd：DOMContentLoaded事件结束的时间点</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // loadEventEnd：页面加载完成的时间点，可以用来计算完整页面加载时间</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    let</span><span style="color:#9CDCFE;"> firstPaint</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">timing</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">domContentLoadedEventEnd</span><span style="color:#D4D4D4;">- </span><span style="color:#9CDCFE;">timing</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">navigationStart</span><span style="color:#D4D4D4;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;FCP:&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">firstPaint</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 方法二</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 获取当前时间作为开始时间</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> startTime</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">performance</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">now</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 监听load事件，当页面加载完成后触发</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">window</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addEventListener</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;load&#39;</span><span style="color:#D4D4D4;">, () </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    // 计算页面加载完成的时间</span></span></span>
<span class="line"><span class="line"><span style="color:#569CD6;">    const</span><span style="color:#4FC1FF;"> endTime</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">performance</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">now</span><span style="color:#D4D4D4;">();</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">`首屏加载时间: </span><span style="color:#569CD6;">${</span><span style="color:#9CDCFE;">endTime</span><span style="color:#D4D4D4;"> - </span><span style="color:#9CDCFE;">startTime</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">ms`</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 方法三</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 如果想要更精确地测量首屏渲染时间，可以监听paint事件</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 这里我们监听的是第一个内容绘制完成的事件</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 注意，此事件在老版本浏览器中可能不支持</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">window</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">addEventListener</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;first-contentful-paint&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">event</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">`首屏渲染时间: </span><span style="color:#569CD6;">${</span><span style="color:#9CDCFE;">event</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">timeStamp</span><span style="color:#D4D4D4;"> - </span><span style="color:#9CDCFE;">startTime</span><span style="color:#569CD6;">}</span><span style="color:#CE9178;">ms`</span><span style="color:#D4D4D4;">);</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">});</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4、检查运行性能" tabindex="-1"><a class="header-anchor" href="#_4、检查运行性能"><span><strong>4、检查运行性能</strong></span></a></h4><p>配合 chrome 的开发者工具，我们可以查看网站在运行时的性能。</p><p>打开网站，按 F12 选择 performance，点击左上角的灰色圆点，变成红色就代表开始记录了。这时可以模仿用户使用网站，在使用完毕后，点击 stop，然后你就能看到网站运行期间的性能报告。如果有红色的块，代表有掉帧的情况；如果是绿色，则代表 FPS 很好。</p><h2 id="todo-在实际项目中的性能优化" tabindex="-1"><a class="header-anchor" href="#todo-在实际项目中的性能优化"><span>（TODO）在实际项目中的性能优化</span></a></h2><h3 id="vue常见性能优化" tabindex="-1"><a class="header-anchor" href="#vue常见性能优化"><span>vue常见性能优化</span></a></h3><ul><li><p>合理使用v-show和v-if</p></li><li><p>合理使用computed</p></li><li><p>v-for避免和v-if同时使用</p></li><li><p>自定义事件、dom事件、定时器等及时销毁</p></li><li><p>合理使用异步组件</p></li><li><p>合理使用keep-alive</p></li><li><p>data层级不要太深</p></li><li><p>使用vue-loader在开发环境做模板编译（预编译）</p></li><li><p>webpack层面的优化</p></li><li><p>前端通用的性能优化，如图片懒加载</p></li><li><p>使用SSR</p></li><li><p>使用组合式函数实现逻辑复用</p></li><li><p>减少大型不可变数据的响应性开销</p><p>Vue 的响应性系统默认是深度的。可以使用 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref" target="_blank" rel="noopener noreferrer"><code>shallowRef()</code></a> 和 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive" target="_blank" rel="noopener noreferrer"><code>shallowReactive()</code></a> 来绕开深度响应。</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> shallowArray</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">shallowRef</span><span style="color:#D4D4D4;">([</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">  /* 巨大的列表，里面包含深层的对象 */</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">])</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 这不会触发更新...</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">shallowArray</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">push</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">newObject</span><span style="color:#D4D4D4;">)</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 这才会触发更新</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">shallowArray</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;"> = [...</span><span style="color:#9CDCFE;">shallowArray</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">newObject</span><span style="color:#D4D4D4;">]</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 这不会触发更新...</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">shallowArray</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">].</span><span style="color:#9CDCFE;">foo</span><span style="color:#D4D4D4;"> = </span><span style="color:#B5CEA8;">1</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">// 这才会触发更新</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">shallowArray</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;"> = [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  {</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    ...</span><span style="color:#9CDCFE;">shallowArray</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    foo:</span><span style="color:#B5CEA8;"> 1</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  ...</span><span style="color:#9CDCFE;">shallowArray</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">slice</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">)</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">]</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>避免不必要的组件抽象</p><p>我们可以创建无渲染组件或高阶组件 (用来渲染具有额外 props 的其他组件) 来实现更好的抽象或代码组织。</p><blockquote><p>一些组件可能只包括了逻辑而不需要自己渲染内容，视图输出通过作用域插槽全权交给了消费者组件。我们将这种类型的组件称为<strong>无渲染组件</strong>。</p></blockquote><p>这里有一个无渲染组件的例子，一个封装了追踪当前鼠标位置逻辑的组件：</p><div class="language-Vue line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="Vue"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-Vue;"><code><span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">MouseTracker</span><span style="color:#9CDCFE;"> v-slot</span><span style="color:#D4D4D4;">=</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#D4D4D4;">{ </span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">y</span><span style="color:#D4D4D4;"> }</span><span style="color:#D4D4D4;">&quot;</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  Mouse is at: {{ x }}, {{ y }}</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">MouseTracker</span><span style="color:#808080;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="react常见性能优化" tabindex="-1"><a class="header-anchor" href="#react常见性能优化"><span>React常见性能优化</span></a></h3><ul><li>渲染列表时加key</li><li>自定义事件、DOM事件及时销毁</li><li>合理使用异步组件</li><li>减少函数 bind this 的次数</li><li>合理使用SCU、PureComponent 和memo</li><li>合理使用Immutable.js</li><li>webpack层面的优化</li><li>前端通用的性能优化，如图片懒加载</li><li>使用SSR</li><li>setState异步函数：能将多个数据的改变结合成一次来做，降低虚拟DOM的比对频率。</li><li>ajax请求放在<code>componentDidMount</code>里</li></ul><h3 id="vue项目性能优化" tabindex="-1"><a class="header-anchor" href="#vue项目性能优化"><span>vue项目性能优化</span></a></h3><h4 id="图片懒加载" tabindex="-1"><a class="header-anchor" href="#图片懒加载"><span>图片懒加载</span></a></h4><div class="language-html line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-html;"><code><span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">img</span><span style="color:#9CDCFE;"> src</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#9CDCFE;"> alt</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#9CDCFE;"> data-src</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;./images/1.jpg&quot;</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">img</span><span style="color:#9CDCFE;"> src</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#9CDCFE;"> alt</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;&quot;</span><span style="color:#9CDCFE;"> data-src</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;./images/2.jpg&quot;</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">// 安装 </span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">npm install vue-lazyload </span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    </span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">// main.js 注册</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">import VueLazyload from &#39;vue-lazyload&#39;</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">Vue.use(VueLazyload)</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">// 配置项</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">Vue.use(VueLazyload, {</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  preLoad: 1.3,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  error: &#39;dist/error.png&#39;, // 图片加载失败时的占位图</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  loading: &#39;dist/loading.gif&#39;, // 图片加载中时的占位图</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  attempt: 1</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">})</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">// 通过 v-lazy 指令使用</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">&lt;</span><span style="color:#569CD6;">ul</span><span style="color:#808080;">&gt;</span><span style="color:#D4D4D4;">  </span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">    &lt;</span><span style="color:#569CD6;">li</span><span style="color:#9CDCFE;"> v-for</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;img in list&quot;</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">        &lt;</span><span style="color:#569CD6;">img</span><span style="color:#9CDCFE;"> v-lazy</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;img.src&quot;</span><span style="color:#9CDCFE;"> :key</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;img.src&quot;</span><span style="color:#808080;"> &gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">    &lt;/</span><span style="color:#569CD6;">li</span><span style="color:#808080;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="color:#808080;">&lt;/</span><span style="color:#569CD6;">ul</span><span style="color:#808080;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="umi项目性能优化" tabindex="-1"><a class="header-anchor" href="#umi项目性能优化"><span>umi项目性能优化</span></a></h3><h4 id="去除console" tabindex="-1"><a class="header-anchor" href="#去除console"><span><strong>去除console</strong></span></a></h4><p>具体操作：https://juejin.cn/post/7103831294013865992</p><p>1.安装<code>babel-plugin-transform-remove-console</code>插件</p><p>2.在config.ts或.umirc.ts中进行配置</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">//在生产环境中取消console</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">extraBabelPlugins</span><span style="color:#D4D4D4;">: [</span><span style="color:#9CDCFE;">isProd</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;transform-remove-console&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;&#39;</span><span style="color:#D4D4D4;">]</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">//或者</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">//在所有环境中取消console</span></span></span>
<span class="line"><span class="line"><span style="color:#C8C8C8;">extraBabelPlugins</span><span style="color:#D4D4D4;">: [</span><span style="color:#9CDCFE;">transform</span><span style="color:#D4D4D4;">-</span><span style="color:#9CDCFE;">remove</span><span style="color:#D4D4D4;">-</span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">]</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="开启gzip压缩" tabindex="-1"><a class="header-anchor" href="#开启gzip压缩"><span><strong>开启gzip压缩</strong></span></a></h4><p>具体操作：https://juejin.cn/post/7103831294013865992</p><p>gzip压缩是前端性能优化的一种手段，减少build之后包的体积，加快首屏渲染速度</p><p>1.安装 <code>compression-webpack-plugin</code> 插件</p><p>2.在config.ts或.umirc.ts中进行配置</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#C8C8C8;">chainWebpack</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">config</span><span style="color:#D4D4D4;">, { </span><span style="color:#9CDCFE;">webpack</span><span style="color:#D4D4D4;"> }) {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">    config</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">merge</span><span style="color:#D4D4D4;">({</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      optimization:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">        splitChunks:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          chunks:</span><span style="color:#CE9178;"> &#39;all&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          minSize:</span><span style="color:#B5CEA8;"> 1000</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          minChunks:</span><span style="color:#B5CEA8;"> 2</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          automaticNameDelimiter:</span><span style="color:#CE9178;"> &#39;.&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          cacheGroups:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">            vendor:</span><span style="color:#D4D4D4;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              name:</span><span style="color:#CE9178;"> &#39;vendors&#39;</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">              test</span><span style="color:#D4D4D4;">({ </span><span style="color:#9CDCFE;">resource</span><span style="color:#D4D4D4;"> }) {</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">                return</span><span style="color:#D16969;"> /</span><span style="color:#CE9178;">[</span><span style="color:#D7BA7D;">\\</span><span style="color:#D16969;">/</span><span style="color:#CE9178;">]</span><span style="color:#D16969;">node_modules</span><span style="color:#CE9178;">[</span><span style="color:#D7BA7D;">\\</span><span style="color:#D16969;">/</span><span style="color:#CE9178;">]</span><span style="color:#D16969;">/</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">test</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">resource</span><span style="color:#D4D4D4;">)</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">              },</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">              priority:</span><span style="color:#B5CEA8;"> 10</span><span style="color:#D4D4D4;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">            },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">          },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    })</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">    //在生产环境开启gzip压缩</span></span></span>
<span class="line"><span class="line"><span style="color:#C586C0;">    if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">isProd</span><span style="color:#D4D4D4;">) {</span></span></span>
<span class="line"><span class="line"><span style="color:#6A9955;">      // Gzip压缩</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">      config</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">plugin</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;compression-webpack-plugin&#39;</span><span style="color:#D4D4D4;">).</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">CompressionPlugin</span><span style="color:#D4D4D4;">, [</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        {</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          test:</span><span style="color:#D16969;"> /</span><span style="color:#D7BA7D;">\.</span><span style="color:#CE9178;">(</span><span style="color:#D16969;">js</span><span style="color:#DCDCAA;">|</span><span style="color:#D16969;">css</span><span style="color:#DCDCAA;">|</span><span style="color:#D16969;">html</span><span style="color:#CE9178;">)</span><span style="color:#DCDCAA;">$</span><span style="color:#D16969;">/</span><span style="color:#569CD6;">i</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 匹配</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          threshold:</span><span style="color:#B5CEA8;"> 10240</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 超过10k的文件压缩</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">          deleteOriginalAssets:</span><span style="color:#569CD6;"> false</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// 不删除源文件</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">        },</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">      ])</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#D4D4D4;">  }</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.还需要后端在nginx中配置 gzip_static on</p><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-javascript;"><code><span class="line"><span class="line"><span style="color:#6A9955;">//nginx 配置</span></span></span>
<span class="line"><span class="line"><span style="color:#9CDCFE;">gzip_static</span><span style="color:#9CDCFE;">  on</span><span style="color:#6A9955;">  //检测是否存在gzip文件，有，则返回给客户端</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="性能检测工具lighthouse" tabindex="-1"><a class="header-anchor" href="#性能检测工具lighthouse"><span>性能检测工具Lighthouse</span></a></h2><h3 id="_1、简介" tabindex="-1"><a class="header-anchor" href="#_1、简介"><span>1、简介</span></a></h3><p>Lighthouse 是一款检测网页质量的自动化工具，Google提供的开源软件，任何网站都可以免费使用。可以检查的网站性能、可访问性、SEO等，并给出优化建议。</p><p><img src="/assets/lighthouse1-DT2-Xkj8.png" alt="lighthouse1"></p><h3 id="_2、安装使用" tabindex="-1"><a class="header-anchor" href="#_2、安装使用"><span>2、安装使用</span></a></h3><ul><li><p>Chrome 开发者工具</p></li><li><p>Chrome 扩展程序</p></li><li><p>命令行安装</p><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre class="shiki dark-plus vp-code" style="background-color:#1E1E1E;color:#D4D4D4 language-bash;"><code><span class="line"><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> lighthouse</span><span style="color:#569CD6;"> -g</span></span></span>
<span class="line"><span class="line"><span style="color:#DCDCAA;">lighthouse</span><span style="color:#CE9178;"> https://www.baidu.com/</span><span style="color:#569CD6;"> --view</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_3、评分指标" tabindex="-1"><a class="header-anchor" href="#_3、评分指标"><span>3、评分指标</span></a></h3><p>1、<strong>FCP（First Contentful Paint）</strong>： 首屏加载时间</p><ul><li>用户开始输入url（开始导航） 到页面出现东西（浏览器渲染第一段DOM。图片、非白色的 &lt; canvas &gt; 元素和 svg 被认为是 DOM 内容，iframe中的任何内容不包含在内）。</li><li>这个指标对于没有使用ssr技术的web app意义并不大，因为第一绘制发生的时间通常JS还没加载完毕。</li></ul><p>2、<strong>SI（Speed Index）</strong>：速度指数（分数越低越好）</p><ul><li>衡量页面加载期间内容的视觉显示速度。</li><li>它要求的是页面的渲染过程应该是渐进的，内容一点点出现，而不是开始一段时间一直是空白，然后全部内容一下出现。</li><li>这个指标跟页面渲染时间和渲染方式有关，如果页面渲染时间很短，页面一下就出来了，那它的得分也会很高。该指标权重为 10%</li></ul><p>3、<strong>TTI（Time to Interactive）</strong>：首次可操作（比如可点击可滚动）</p><ul><li>衡量一个页面需要多长时间才能完全交互</li><li>主要影响因素就是页面渲染速度和 JS 阻塞时间。</li></ul><p>4、<strong>TBT（Total Blocking Time）</strong>：总阻塞时间</p><ul><li>在FCP和TTI之间，所有超过50ms的long task的超过时间之和</li><li>要求我们所有的 JS 任务(宏任务，一般是函数)执行时间不要大于 50 ms</li></ul><p>5、<strong>LCP（Largest Contentful Paint）</strong>：当前页面上”最大的内容“渲染时间</p><ul><li>衡量页面的主要内容对用户可见的时间</li></ul><p>6、<strong>CLS（Cumulative Layout Shift）</strong>：累积布局移位</p><ul><li><p>网页布局在加载期间的偏移量，普遍用于测量视觉稳定性。</p></li><li><p>得分范围是0－1，其中0表示没有偏移，1表示最大偏移。要求我们在渲染页面过程中，不要频繁发生内容块的偏移。</p></li></ul><h3 id="_4、常见问题" tabindex="-1"><a class="header-anchor" href="#_4、常见问题"><span>4、常见问题</span></a></h3><h5 id="_1-use-http-2" tabindex="-1"><a class="header-anchor" href="#_1-use-http-2"><span>1. Use HTTP/2</span></a></h5><p>http1.1替换为http2.0后可使用二进制标头和多路复用（可以只通过一个 TCP 连接就可以传输所有的请求数据，并行请求）。</p><h5 id="_2-remove-unused-css-或者-remove-unused-javascript-移除无用的js和css" tabindex="-1"><a class="header-anchor" href="#_2-remove-unused-css-或者-remove-unused-javascript-移除无用的js和css"><span>2. Remove unused CSS 或者 Remove unused JavaScript（移除无用的js和css）</span></a></h5><h5 id="_3-serve-static-assets-with-an-efficient-cache-policy-为静态资源提供缓存" tabindex="-1"><a class="header-anchor" href="#_3-serve-static-assets-with-an-efficient-cache-policy-为静态资源提供缓存"><span>3. Serve static assets with an efficient cache policy（为静态资源提供缓存）</span></a></h5><h5 id="_4-reduce-javascript-execution-time-减少js的执行时间" tabindex="-1"><a class="header-anchor" href="#_4-reduce-javascript-execution-time-减少js的执行时间"><span>4. Reduce JavaScript execution time 减少js的执行时间</span></a></h5><p>当JavaScript执行时间超过2秒时，Lighthouse将显示警告。执行时间超过3.5秒时，审核将失败</p><ul><li>拆分代码</li><li>缩小并压缩代码</li><li>删除未使用的代码 (tree shaking)</li><li>使用缓存代码</li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2025-04-08T15:42:36.000Z" data-allow-mismatch>2025/4/8 15:42</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 980715844@qq.com">csmSimona</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: chenshimeng@hyperchain.cn">chenshimeng</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CHuoViYK.js" defer></script>
  </body>
</html>
